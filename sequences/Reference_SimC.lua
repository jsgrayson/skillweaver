-- Reference SimC Rotations (Auto-Generated)
local SkillWeaver = ...
SkillWeaver.Reference = {}

SkillWeaver.Reference["Warrior_Arms"] = {
    ["Slayer"] = {
        -- SimC List: slayer_aoe (24 actions)
        { command = "/cast Sweeping Strikes", conditions = "true" },
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Avatar", conditions = "true" },
        { command = "/cast Champions Spear", conditions = "true" },
        { command = "/cast Ravager", conditions = "cooldown:Colossus Smash<=gcd" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Cleave", conditions = "true" },
        { command = "/cast Execute", conditions = "buff:Sudden Death > 0 and buff.imminent_demise.stack<3 or buff:Juggernaut<3 and talent.juggernaut" },
        { command = "/cast Bladestorm", conditions = "true" },
        { command = "/cast Overpower", conditions = "buff:Sweeping Strikes > 0 and (buff:Opportunist > 0 or talent.dreadnaught and not talent.juggernaut)" },
        { command = "/cast Mortal Strike", conditions = "buff:Sweeping Strikes > 0" },
        { command = "/cast Execute", conditions = "buff:Sweeping Strikes > 0 and debuff.executioners_precision.stack<2 and talent.executioners_precision or debuff:Marked For Execution > 0" },
        { command = "/cast Skullsplitter", conditions = "buff:Sweeping Strikes > 0" },
        { command = "/cast Overpower", conditions = "buff:Opportunist > 0 or talent.dreadnaught" },
        { command = "/cast Mortal Strike", conditions = "true" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Thunder Clap", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Whirlwind", conditions = "true" },
        { command = "/cast Skullsplitter", conditions = "true" },
        { command = "/cast Slam", conditions = "true" },
        { command = "/cast Storm Bolt", conditions = "buff:Bladestorm > 0" },
        -- SimC List: slayer_execute (17 actions)
        { command = "/cast Rend", conditions = "dot.rend.remains<=gcd and not talent.bloodletting" },
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Avatar", conditions = "cooldown:Colossus Smash<=5 or debuff:Colossus Smash > 0" },
        { command = "/cast Champions Spear", conditions = "debuff:Colossus Smash > 0 or buff:Avatar > 0" },
        { command = "/cast Ravager", conditions = "cooldown:Colossus Smash<=gcd" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Execute", conditions = "buff:Juggernaut<=gcd*2 and talent.juggernaut" },
        { command = "/cast Bladestorm", conditions = "(debuff.executioners_precision.stack=2 and (debuff:Colossus Smash>4 or cooldown:Colossus Smash>15)) or not talent.executioners_precision" },
        { command = "/cast Skullsplitter", conditions = "rage < =40" },
        { command = "/cast Overpower", conditions = "buff.overpower.stack<2 and buff:Opportunist > 0 and talent.opportunist and (talent.bladestorm or talent.ravager and rage < 85)" },
        { command = "/cast Mortal Strike", conditions = "dot.rend.remains<2 or debuff.executioners_precision.stack=2 and not buff:Ravager > 0" },
        { command = "/cast Overpower", conditions = "rage < =40 and buff.overpower.stack<2 and talent.fierce_followthrough" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Storm Bolt", conditions = "buff:Bladestorm > 0" },
        -- SimC List: slayer_st (18 actions)
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Avatar", conditions = "cooldown:Colossus Smash<=5 or debuff:Colossus Smash > 0" },
        { command = "/cast Champions Spear", conditions = "debuff:Colossus Smash > 0 or buff:Avatar > 0" },
        { command = "/cast Ravager", conditions = "cooldown:Colossus Smash<=gcd" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Execute", conditions = "buff:Juggernaut<=gcd*2 and talent.juggernaut or buff.sudden_death.stack=2 or buff:Sudden Death<=gcd*3 or debuff.marked_for_execution.stack=3" },
        { command = "/cast Overpower", conditions = "buff:Opportunist > 0" },
        { command = "/cast Mortal Strike", conditions = "true" },
        { command = "/cast Bladestorm", conditions = "(cooldown:Colossus Smash>=gcd*4 or cooldown:Warbreaker>=gcd*4) or debuff:Colossus Smash>=gcd*4" },
        { command = "/cast Skullsplitter", conditions = "true" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Rend", conditions = "dot.rend.remains<=8" },
        { command = "/cast Execute", conditions = "not talent.juggernaut" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Cleave", conditions = "true" },
        { command = "/cast Slam", conditions = "true" },
        { command = "/cast Storm Bolt", conditions = "buff:Bladestorm > 0" },
        -- SimC List: slayer_sweep (21 actions)
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Sweeping Strikes", conditions = "true" },
        { command = "/cast Rend", conditions = "dot.rend.remains<=gcd" },
        { command = "/cast Champions Spear", conditions = "true" },
        { command = "/cast Avatar", conditions = "true" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Skullsplitter", conditions = "buff:Sweeping Strikes > 0" },
        { command = "/cast Execute", conditions = "buff:Juggernaut<=gcd*2 or debuff.marked_for_execution.stack=3 or buff.sudden_death.stack=2 or buff:Sudden Death<=gcd*3" },
        { command = "/cast Bladestorm", conditions = "(cooldown:Colossus Smash>=gcd*4 or cooldown:Warbreaker>=gcd*4) or debuff:Colossus Smash>=gcd*4" },
        { command = "/cast Overpower", conditions = "buff:Opportunist > 0" },
        { command = "/cast Mortal Strike", conditions = "true" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Thunder Clap", conditions = "dot.rend.remains<=8 and buff:Sweeping Strikes == 0" },
        { command = "/cast Rend", conditions = "dot.rend.remains<=5" },
        { command = "/cast Cleave", conditions = "talent.fervor_of_battle and not buff:Overpower > 0" },
        { command = "/cast Whirlwind", conditions = "talent.fervor_of_battle" },
        { command = "/cast Execute", conditions = "not talent.juggernaut" },
        { command = "/cast Wrecking Throw", conditions = "not buff:Sweeping Strikes > 0" },
        { command = "/cast Slam", conditions = "true" },
        { command = "/cast Storm Bolt", conditions = "buff:Bladestorm > 0" },
    },
    ["Colossus"] = {
        -- SimC List: colossus_aoe (20 actions)
        { command = "/cast Thunder Clap", conditions = "not dot.rend.remains" },
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Avatar", conditions = "true" },
        { command = "/cast Sweeping Strikes", conditions = "true" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Ravager", conditions = "true" },
        { command = "/cast Champions Spear", conditions = "true" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Cleave", conditions = "true" },
        { command = "/cast Bladestorm", conditions = "talent.unhinged or talent.merciless_bonegrinder" },
        { command = "/cast Thunder Clap", conditions = "dot.rend.remains<5" },
        { command = "/cast Demolish", conditions = "buff.colossal_might.stack=10 and (debuff:Colossus Smash>=2 or cooldown:Colossus Smash>=7)" },
        { command = "/cast Mortal Strike", conditions = "true" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Thunder Clap", conditions = "true" },
        { command = "/cast Skullsplitter", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Bladestorm", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Whirlwind", conditions = "true" },
        -- SimC List: colossus_execute (17 actions)
        { command = "/cast Rend", conditions = "dot.rend.remains<=gcd and not talent.bloodletting" },
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Champions Spear", conditions = "true" },
        { command = "/cast Ravager", conditions = "cooldown:Colossus Smash<=gcd" },
        { command = "/cast Avatar", conditions = "true" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Execute", conditions = "buff:Juggernaut<=gcd and talent.juggernaut" },
        { command = "/cast Skullsplitter", conditions = "rage < 40" },
        { command = "/cast Demolish", conditions = "debuff:Colossus Smash > 0" },
        { command = "/cast Mortal Strike", conditions = "debuff.executioners_precision.stack=2 and not buff:Ravager > 0 or not talent.executioners_precision or talent.battlelord and debuff.executioners_precision.stack>0" },
        { command = "/cast Overpower", conditions = "rage < 90" },
        { command = "/cast Execute", conditions = "rage > =40 and talent.executioners_precision" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Bladestorm", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        -- SimC List: colossus_st (14 actions)
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Ravager", conditions = "cooldown:Colossus Smash<=gcd" },
        { command = "/cast Champions Spear", conditions = "true" },
        { command = "/cast Avatar", conditions = "raid_event.adds.in>15" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Mortal Strike", conditions = "true" },
        { command = "/cast Demolish", conditions = "true" },
        { command = "/cast Skullsplitter", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Rend", conditions = "dot.rend.remains<=gcd*5" },
        { command = "/cast Slam", conditions = "true" },
        -- SimC List: colossus_sweep (18 actions)
        { command = "/cast Rend", conditions = "dot.rend.remains<=gcd and buff:Sweeping Strikes > 0" },
        { command = "/cast Thunderous Roar", conditions = "true" },
        { command = "/cast Sweeping Strikes", conditions = "true" },
        { command = "/cast Champions Spear", conditions = "true" },
        { command = "/cast Ravager", conditions = "cooldown.colossus_smash.ready" },
        { command = "/cast Avatar", conditions = "true" },
        { command = "/cast Colossus Smash", conditions = "true" },
        { command = "/cast Warbreaker", conditions = "true" },
        { command = "/cast Mortal Strike", conditions = "true" },
        { command = "/cast Demolish", conditions = "debuff:Colossus Smash > 0" },
        { command = "/cast Overpower", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Whirlwind", conditions = "talent.fervor_of_battle" },
        { command = "/cast Cleave", conditions = "talent.fervor_of_battle" },
        { command = "/cast Thunder Clap", conditions = "dot.rend.remains<=8 and buff:Sweeping Strikes == 0" },
        { command = "/cast Wrecking Throw", conditions = "not buff:Sweeping Strikes > 0" },
        { command = "/cast Rend", conditions = "dot.rend.remains<=5" },
        { command = "/cast Slam", conditions = "true" },
    },
    ["Default_Main"] = {
        -- SimC List: default (21 actions)
        { command = "/cast Auto Attack", conditions = "true" },
        { command = "/cast Potion", conditions = "gcd.remains=0 and debuff:Colossus Smash>8 or ttd<25" },
        { command = "/cast Pummel", conditions = "debuff.casting.react" },
        { command = "/cast Call Action List,Name=Variables", conditions = "true" },
        { command = "/cast Call Action List,Name=Trinkets", conditions = "true" },
        { command = "/cast Arcane Torrent", conditions = "cooldown:Mortal Strike>1.5 and rage < 50" },
        { command = "/cast Lights Judgment", conditions = "debuff:Colossus Smash == 0 and cooldown:Mortal Strike" },
        { command = "/cast Bag Of Tricks", conditions = "debuff:Colossus Smash == 0 and cooldown:Mortal Strike" },
        { command = "/cast Berserking", conditions = "ttd>180 and buff:Avatar > 0 or ttd<180 and variable.execute_phase and buff:Avatar > 0 or ttd<20" },
        { command = "/cast Blood Fury", conditions = "debuff:Colossus Smash > 0" },
        { command = "/cast Fireblood", conditions = "debuff:Colossus Smash > 0" },
        { command = "/cast Ancestral Call", conditions = "debuff:Colossus Smash > 0" },
        { command = "/cast Invoke External Buff,Name=Power Infusion", conditions = "debuff:Colossus Smash > 0 and fight_remains>=135 or variable.execute_phase and buff:Avatar > 0 or fight_remains<=25" },
        { command = "/cast Run Action List,Name=Colossus Aoe", conditions = "talent.demolish and active_enemies>2" },
        { command = "/cast Run Action List,Name=Colossus Execute,Target If=Min:Target.Health.Pct", conditions = "talent.demolish and variable.execute_phase" },
        { command = "/cast Run Action List,Name=Colossus Sweep", conditions = "talent.demolish and active_enemies=2 and not variable.execute_phase" },
        { command = "/cast Run Action List,Name=Colossus St", conditions = "talent.demolish" },
        { command = "/cast Run Action List,Name=Slayer Aoe", conditions = "talent.slayers_dominance and active_enemies>2" },
        { command = "/cast Run Action List,Name=Slayer Execute,Target If=Min:Target.Health.Pct", conditions = "talent.slayers_dominance and variable.execute_phase" },
        { command = "/cast Run Action List,Name=Slayer Sweep", conditions = "talent.slayers_dominance and active_enemies=2 and not variable.execute_phase" },
        { command = "/cast Run Action List,Name=Slayer St", conditions = "talent.slayers_dominance" },
    },
}

SkillWeaver.Reference["Warrior_Fury"] = {
    ["Slayer"] = {
        -- SimC List: slayer (35 actions)
        { command = "/cast Avatar", conditions = "cooldown:Recklessness" },
        { command = "/cast Execute", conditions = "buff:Ashen Juggernaut > 0 and buff:Ashen Juggernaut<=gcd" },
        { command = "/cast Champions Spear", conditions = "buff:Enrage > 0 and (cooldown:Bladestorm>=2 or cooldown:Bladestorm>=16 and debuff.marked_for_execution.stack=3)" },
        { command = "/cast Ravager", conditions = "buff:Enrage > 0" },
        { command = "/cast Bladestorm", conditions = "buff:Enrage > 0 and (talent.reckless_abandon and cooldown:Avatar>=24 or talent.anger_management and cooldown:Recklessness>=18)" },
        { command = "/cast Odyns Fury", conditions = "(buff:Enrage > 0 or talent.titanic_rage) and cooldown:Avatar" },
        { command = "/cast Whirlwind", conditions = "active_enemies>=2 and talent.meat_cleaver and buff.meat_cleaver.stack=0" },
        { command = "/cast Execute", conditions = "buff.sudden_death.stack=2 and buff:Sudden Death<7" },
        { command = "/cast Execute", conditions = "buff:Sudden Death > 0 and buff:Sudden Death<2" },
        { command = "/cast Execute", conditions = "buff:Sudden Death > 0 and buff.imminent_demise.stack<3 and cooldown:Bladestorm<25" },
        { command = "/cast Onslaught", conditions = "talent.tenderize" },
        { command = "/cast Rampage", conditions = "not buff:Enrage > 0 or buff.slaughtering_strikes.stack>=4" },
        { command = "/cast Crushing Blow", conditions = "action.raging_blow.charges=2 or buff:Brutal Finish > 0 and (not debuff:Champions Might > 0 or debuff:Champions Might > 0 and debuff:Champions Might>gcd)" },
        { command = "/cast Thunderous Roar", conditions = "buff:Enrage > 0 and not buff:Brutal Finish > 0" },
        { command = "/cast Execute", conditions = "debuff.marked_for_execution.stack=3" },
        { command = "/cast Bloodbath", conditions = "buff.bloodcraze.stack>=1 or (talent.uproar and dot.bloodbath_dot.remains<40 and talent.bloodborne) or buff:Enrage > 0 and buff:Enrage < gcd" },
        { command = "/cast Raging Blow", conditions = "buff:Brutal Finish > 0 and buff.slaughtering_strikes.stack<5 and (not debuff:Champions Might > 0 or debuff:Champions Might > 0 and debuff:Champions Might>gcd)" },
        { command = "/cast Bloodthirst", conditions = "active_enemies>3" },
        { command = "/cast Rampage", conditions = "action.raging_blow.charges<=1 and rage > =100 and talent.anger_management and buff:Recklessness == 0" },
        { command = "/cast Rampage", conditions = "rage > =120 or talent.reckless_abandon and buff:Recklessness > 0 and buff.slaughtering_strikes.stack>=3" },
        { command = "/cast Bloodbath", conditions = "buff.bloodcraze.stack>=4 or crit_pct_current>=85 or active_enemies>2" },
        { command = "/cast Crushing Blow", conditions = "true" },
        { command = "/cast Bloodbath", conditions = "true" },
        { command = "/cast Raging Blow", conditions = "buff:Opportunist > 0" },
        { command = "/cast Bloodthirst", conditions = "(target_health < 35 and talent.vicious_contempt and buff.bloodcraze.stack>=2) or active_enemies>2" },
        { command = "/cast Rampage", conditions = "rage > =100 and talent.anger_management and buff:Recklessness > 0" },
        { command = "/cast Bloodthirst", conditions = "buff.bloodcraze.stack>=4 or crit_pct_current>=85" },
        { command = "/cast Raging Blow", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Bloodthirst", conditions = "true" },
        { command = "/cast Rampage", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Whirlwind", conditions = "talent.improved_whirlwind" },
        { command = "/cast Slam", conditions = "not talent.improved_whirlwind" },
        { command = "/cast Storm Bolt", conditions = "buff:Bladestorm > 0" },
    },
    ["Thane"] = {
        -- SimC List: thane (25 actions)
        { command = "/cast Avatar", conditions = "true" },
        { command = "/cast Ravager", conditions = "true" },
        { command = "/cast Thunder Blast", conditions = "buff:Enrage > 0 and talent.meat_cleaver" },
        { command = "/cast Thunder Clap", conditions = "buff.meat_cleaver.stack=0 and talent.meat_cleaver and active_enemies>=2" },
        { command = "/cast Thunderous Roar", conditions = "buff:Enrage > 0" },
        { command = "/cast Champions Spear", conditions = "buff:Enrage > 0" },
        { command = "/cast Odyns Fury", conditions = "(buff:Enrage > 0 or talent.titanic_rage) and cooldown:Avatar" },
        { command = "/cast Rampage", conditions = "buff:Enrage == 0" },
        { command = "/cast Execute", conditions = "talent.ashen_juggernaut and buff:Ashen Juggernaut<=gcd" },
        { command = "/cast Rampage", conditions = "talent.bladestorm and cooldown:Bladestorm<=gcd and not debuff:Champions Might > 0" },
        { command = "/cast Bladestorm", conditions = "buff:Enrage > 0 and talent.unhinged" },
        { command = "/cast Bloodbath", conditions = "buff.bloodcraze.stack>=2" },
        { command = "/cast Rampage", conditions = "rage > =115 and talent.reckless_abandon and buff:Recklessness > 0 and buff.slaughtering_strikes.stack>=3" },
        { command = "/cast Crushing Blow", conditions = "true" },
        { command = "/cast Bloodbath", conditions = "true" },
        { command = "/cast Onslaught", conditions = "talent.tenderize" },
        { command = "/cast Rampage", conditions = "true" },
        { command = "/cast Bloodthirst", conditions = "talent.vicious_contempt and target_health < 35 and buff.bloodcraze.stack>=2 or not buff:Ravager > 0 and buff.bloodcraze.stack>=3 or active_enemies>=6" },
        { command = "/cast Raging Blow", conditions = "true" },
        { command = "/cast Execute", conditions = "talent.ashen_juggernaut" },
        { command = "/cast Thunder Blast", conditions = "true" },
        { command = "/cast Wrecking Throw", conditions = "true" },
        { command = "/cast Bloodthirst", conditions = "true" },
        { command = "/cast Execute", conditions = "true" },
        { command = "/cast Thunder Clap", conditions = "true" },
    },
    ["Default_Main"] = {
        -- SimC List: default (15 actions)
        { command = "/cast Charge", conditions = "time<=0.5 or movement.distance>5" },
        { command = "/cast Heroic Leap", conditions = "(raid_event.movement.distance>25 and raid_event.movement.in>45)" },
        { command = "/cast Potion", conditions = "ttd>300 or ttd<300 and target_health < 35 and buff:Recklessness > 0 or ttd<25" },
        { command = "/cast Pummel", conditions = "debuff.casting.react" },
        { command = "/cast Call Action List,Name=Trinkets", conditions = "true" },
        { command = "/cast Call Action List,Name=Variables", conditions = "true" },
        { command = "/cast Lights Judgment", conditions = "variable.on_gcd_racials" },
        { command = "/cast Bag Of Tricks", conditions = "variable.on_gcd_racials" },
        { command = "/cast Berserking", conditions = "buff:Recklessness > 0" },
        { command = "/cast Blood Fury", conditions = "true" },
        { command = "/cast Fireblood", conditions = "true" },
        { command = "/cast Ancestral Call", conditions = "true" },
        { command = "/cast Invoke External Buff,Name=Power Infusion", conditions = "buff:Avatar>15 and fight_remains>=135 or variable.execute_phase and buff:Avatar > 0 or fight_remains<=25" },
        { command = "/cast Run Action List,Name=Slayer", conditions = "talent.slayers_dominance" },
        { command = "/cast Run Action List,Name=Thane", conditions = "talent.lightning_strikes" },
    },
}

SkillWeaver.Reference["Warlock_Destruction"] = {
    ["Default_Main"] = {
        -- SimC List: default (28 actions)
        { command = "/cast Call Action List,Name=Aoe", conditions = "(active_enemies>=3) and not variable.cleave_apl" },
        { command = "/cast Call Action List,Name=Cleave", conditions = "active_enemiesnot =1 or variable.cleave_apl" },
        { command = "/cast Call Action List,Name=Ogcd", conditions = "true" },
        { command = "/cast Call Action List,Name=Items", conditions = "true" },
        { command = "/cast Malevolence", conditions = "cooldown:Summon Infernal>=55" },
        { command = "/cast Wait,Sec=((Buff.Diabolic Ritual Mother Of Chaos.Remains+Buff.Diabolic Ritual Overlord.Remains+Buff.Diabolic Ritual Pit Lord.Remains))", conditions = "(diabolic_ritual and (buff:Diabolic Ritual Mother Of Chaos+buff:Diabolic Ritual Overlord+buff:Diabolic Ritual Pit Lord)<gcd.max*0.25) and soul_shard>2" },
        { command = "/cast Chaos Bolt", conditions = "demonic_art" },
        { command = "/cast Soul Fire", conditions = "buff.decimation.react and (soul_shard<=4 or buff:Decimation<=gcd.max*2) and debuff:Conflagrate>=execute_time" },
        { command = "/cast Wither", conditions = "talent.internal_combustion and (((dot.wither.remains-5*action.chaos_bolt.in_flight)<dot.wither.duration*0.4) or dot.wither.remains<3 or (dot.wither.remains-action.chaos_bolt.execute_time)<5 and action.chaos_bolt.usable) and (not talent.soul_fire or cooldown:Soul Fire+action.soul_fire.cast_time>(dot.wither.remains-5)) and ttd>8 and not action.soul_fire.in_flight_to_target" },
        { command = "/cast Conflagrate", conditions = "talent.roaring_blaze and debuff:Conflagrate<1.5 or full_recharge_time<=gcd.max*2 or recharge_time<=8 and (diabolic_ritual and (buff:Diabolic Ritual Mother Of Chaos+buff:Diabolic Ritual Overlord+buff:Diabolic Ritual Pit Lord)<gcd.max) and soul_shard>=1.5" },
        { command = "/cast Shadowburn", conditions = "(cooldown.shadowburn.full_recharge_time<=gcd.max*3 or debuff:Eradication<=gcd.max and talent.eradication and not action.chaos_bolt.in_flight and not talent.diabolic_ritual) and (talent.conflagration_of_chaos or talent.blistering_atrophy) and not demonic_art or fight_remains<=8" },
        { command = "/cast Chaos Bolt", conditions = "buff:Ritual Of Ruin > 0" },
        { command = "/cast Shadowburn", conditions = "(cooldown:Summon Infernal>=90 and talent.rain_of_chaos) or buff:Malevolence > 0" },
        { command = "/cast Chaos Bolt", conditions = "(cooldown:Summon Infernal>=90 and talent.rain_of_chaos) or buff:Malevolence > 0" },
        { command = "/cast Ruination", conditions = "(debuff:Eradication>=execute_time or not talent.eradication or not talent.shadowburn)" },
        { command = "/cast Cataclysm", conditions = "raid_event.adds.in>15 and (talent.wither and dot.wither.refreshable)" },
        { command = "/cast Channel Demonfire", conditions = "talent.raging_demonfire and (dot.immolate.remains+dot.wither.remains-5*(action.chaos_bolt.in_flight and talent.internal_combustion))>cast_time" },
        { command = "/cast Wither", conditions = "not talent.internal_combustion and (((dot.wither.remains-5*(action.chaos_bolt.in_flight))<dot.wither.duration*0.3) or dot.wither.remains<3) and (not talent.cataclysm or cooldown:Cataclysm>dot.wither.remains) and (not talent.soul_fire or cooldown:Soul Fire+action.soul_fire.cast_time>(dot.wither.remains)) and ttd>8 and not action.soul_fire.in_flight_to_target" },
        { command = "/cast Immolate", conditions = "(((dot.immolate.remains-5*(action.chaos_bolt.in_flight and talent.internal_combustion))<dot.immolate.duration*0.3) or dot.immolate.remains<3 or (dot.immolate.remains-action.chaos_bolt.execute_time)<5 and talent.internal_combustion and action.chaos_bolt.usable) and (not talent.soul_fire or cooldown:Soul Fire+action.soul_fire.cast_time>(dot.immolate.remains-5*talent.internal_combustion)) and ttd>8 and not action.soul_fire.in_flight_to_target" },
        { command = "/cast Summon Infernal", conditions = "true" },
        { command = "/cast Incinerate", conditions = "talent.diabolic_ritual and (diabolic_ritual and (buff:Diabolic Ritual Mother Of Chaos+buff:Diabolic Ritual Overlord+buff:Diabolic Ritual Pit Lord-2-not variable.disable_cb_2t*action.chaos_bolt.cast_time-variable.disable_cb_2t*gcd.max)<=0)" },
        { command = "/cast Chaos Bolt", conditions = "variable.pooling_condition_cb and (cooldown:Summon Infernal>=gcd.max*3 or soul_shard>4 or not talent.rain_of_chaos)" },
        { command = "/cast Channel Demonfire", conditions = "true" },
        { command = "/cast Dimensional Rift", conditions = "true" },
        { command = "/cast Infernal Bolt", conditions = "true" },
        { command = "/cast Conflagrate", conditions = "charges>(max_charges-1) or fight_remains<gcd.max*charges" },
        { command = "/cast Soul Fire", conditions = "buff:Backdraft > 0" },
        { command = "/cast Incinerate", conditions = "true" },
        -- SimC List: aoe (33 actions)
        { command = "/cast Call Action List,Name=Items", conditions = "true" },
        { command = "/cast Malevolence", conditions = "cooldown:Summon Infernal>=55 and soul_shard<4.7 and (active_enemies<=3+active_dot.wither or time>30)" },
        { command = "/cast Rain Of Fire", conditions = "demonic_art" },
        { command = "/cast Wait,Sec=((Buff.Diabolic Ritual Mother Of Chaos.Remains+Buff.Diabolic Ritual Overlord.Remains+Buff.Diabolic Ritual Pit Lord.Remains))", conditions = "(diabolic_ritual and (buff:Diabolic Ritual Mother Of Chaos+buff:Diabolic Ritual Overlord+buff:Diabolic Ritual Pit Lord)<gcd.max*0.25) and soul_shard>2" },
        { command = "/cast Incinerate", conditions = "(diabolic_ritual and (buff:Diabolic Ritual Mother Of Chaos+buff:Diabolic Ritual Overlord+buff:Diabolic Ritual Pit Lord)<=action.incinerate.cast_time and (buff:Diabolic Ritual Mother Of Chaos+buff:Diabolic Ritual Overlord+buff:Diabolic Ritual Pit Lord)>gcd.max*0.25)" },
        { command = "/cast Call Action List,Name=Havoc", conditions = "havoc_active and havoc_remains>gcd.max and active_enemies<(5+not talent.wither) and (not cooldown:Summon Infernal == 0 or not talent.summon_infernal)" },
        { command = "/cast Dimensional Rift", conditions = "soul_shard<4.7 and (charges>2 or fight_remains<cooldown.dimensional_rift.duration)" },
        { command = "/cast Rain Of Fire", conditions = "soul_shard>=(4.5-0.1*(active_dot.immolate+active_dot.wither)) or soul_shard>=(3.5-0.1*(active_dot.immolate+active_dot.wither)) or buff:Ritual Of Ruin > 0" },
        { command = "/cast Wither,Target If=Min:Dot.Wither.Remains+99*Debuff.Havoc.Remains+99*!Dot.Wither.Ticking", conditions = "dot.wither.refreshable and (not talent(Cataclysm) or cooldown:Cataclysm>dot.wither.remains) and (not (talent.raging_demonfire and talent.channel_demonfire) or cooldown:Channel Demonfire>remains or time<5) and (active_dot.wither<=4 or time>15) and ttd>18" },
        { command = "/cast Channel Demonfire", conditions = "dot.immolate.remains+dot.wither.remains>cast_time and talent.raging_demonfire" },
        { command = "/cast Shadowburn", conditions = "((buff:Malevolence > 0 and ((talent.cataclysm and active_enemies<=10))) or (talent.wither and talent.cataclysm and active_enemies<=6) or (not talent.wither and talent.cataclysm and active_enemies<=4) or active_enemies<=3) and ((cooldown.shadowburn.full_recharge_time<=gcd.max*3 or debuff:Eradication<=gcd.max and talent.eradication and not action.chaos_bolt.in_flight and not talent.diabolic_ritual) and (talent.conflagration_of_chaos or talent.blistering_atrophy) or fight_remains<=8)" },
        { command = "/cast Shadowburn,Target If=Min:Time To Die", conditions = "((buff:Malevolence > 0 and ((talent.cataclysm and active_enemies<=10))) or (talent.wither and talent.cataclysm and active_enemies<=6) or (not talent.wither and talent.cataclysm and active_enemies<=4) or active_enemies<=3) and ((cooldown.shadowburn.full_recharge_time<=gcd.max*3 or debuff:Eradication<=gcd.max and talent.eradication and not action.chaos_bolt.in_flight and not talent.diabolic_ritual) and (talent.conflagration_of_chaos or talent.blistering_atrophy) and ttd<5 or fight_remains<=8)" },
        { command = "/cast Ruination", conditions = "true" },
        { command = "/cast Rain Of Fire", conditions = "pet.infernal.active and talent.rain_of_chaos" },
        { command = "/cast Soul Fire,Target If=Min:Dot.Wither.Remains+Dot.Immolate.Remains-5*Debuff.Conflagrate.Up+100*Debuff.Havoc.Remains", conditions = "(buff:Decimation > 0) and not talent.raging_demonfire and havoc_active" },
        { command = "/cast Soul Fire,Target If=Min:(Dot.Wither.Remains+Dot.Immolate.Remains-5*Debuff.Conflagrate.Up+100*Debuff.Havoc.Remains)", conditions = "buff:Decimation > 0 and active_dot.immolate<=4" },
        { command = "/cast Infernal Bolt", conditions = "soul_shard<2.5" },
        { command = "/cast Chaos Bolt", conditions = "((soul_shard>3.5-(0.1*active_enemies)) and not action.rain_of_fire.enabled) or (not talent.wither and talent.cataclysm and active_enemies<=3)" },
        { command = "/cast Cataclysm", conditions = "raid_event.adds.in>15 or talent.wither" },
        { command = "/cast Havoc,Target If=Min:((-Target.Time To Die)<?-15)+Dot.Immolate.Remains+99*(Self.Target=Target)", conditions = "(not cooldown:Summon Infernal == 0 or not talent.summon_infernal) and ttd>8 and (cooldown:Malevolence>15 or not talent.malevolence) or time<5" },
        { command = "/cast Wither,Target If=Min:Dot.Wither.Remains+99*Debuff.Havoc.Remains", conditions = "dot.wither.refreshable and (not talent(Cataclysm) or cooldown:Cataclysm>dot.wither.remains) and (not (talent.raging_demonfire and talent.channel_demonfire) or cooldown:Channel Demonfire>remains or time<5) and active_dot.wither<=active_enemies and ttd>18" },
        { command = "/cast Immolate,Target If=Min:Dot.Immolate.Remains+99*Debuff.Havoc.Remains", conditions = "dot.immolate.refreshable and (not talent(Cataclysm) or cooldown:Cataclysm>dot.immolate.remains) and (not (talent.raging_demonfire and talent.channel_demonfire) or cooldown:Channel Demonfire>remains or time<5) and active_dot.immolate<=6 and ttd>18" },
        { command = "/cast Call Action List,Name=Ogcd", conditions = "true" },
        { command = "/cast Summon Infernal", conditions = "cooldown:Invoke Power Infusion 0 == 0 or cooldown.invoke_power_infusion_0.duration=0 or fight_remains>=120" },
        { command = "/cast Rain Of Fire", conditions = "debuff:Pyrogenics == 0 and active_enemies<=4 and not talent.diabolic_ritual" },
        { command = "/cast Channel Demonfire", conditions = "dot.immolate.remains+dot.wither.remains>cast_time" },
        { command = "/cast Immolate,Target If=Min:Dot.Immolate.Remains+99*Debuff.Havoc.Remains", conditions = "((dot.immolate.refreshable and (not talent(Cataclysm) or cooldown:Cataclysm>dot.immolate.remains)) or active_enemies>active_dot.immolate) and ttd>10 and not havoc_active" },
        { command = "/cast Immolate,Target If=Min:Dot.Immolate.Remains+99*Debuff.Havoc.Remains", conditions = "((dot.immolate.refreshable and variable.havoc_immo_time<5.4) or (dot.immolate.remains<2 and dot.immolate.remains<havoc_remains) or not dot.immolate.ticking or (variable.havoc_immo_time<2)*havoc_active) and (not talent(Cataclysm) or cooldown:Cataclysm>dot.immolate.remains) and ttd>11" },
        { command = "/cast Dimensional Rift", conditions = "true" },
        { command = "/cast Soul Fire,Target If=Min:(Dot.Wither.Remains+Dot.Immolate.Remains-5*Debuff.Conflagrate.Up+100*Debuff.Havoc.Remains)", conditions = "buff:Decimation > 0" },
        { command = "/cast Incinerate", conditions = "talent(Fire And Brimstone) and buff:Backdraft > 0" },
        { command = "/cast Conflagrate", conditions = "buff.backdraft.stack<2 or not talent.backdraft" },
        { command = "/cast Incinerate", conditions = "true" },
    },
}

SkillWeaver.Reference["Priest_Shadow"] = {
    ["Default_Main"] = {
        -- SimC List: default (2 actions)
        { command = "/cast Call Action List,Name=Aoe", conditions = "active_enemies>2" },
        { command = "/cast Run Action List,Name=Main", conditions = "true" },
        -- SimC List: main (26 actions)
        { command = "/cast Call Action List,Name=Cds", conditions = "fight_remains<30 or ttd>15 and (not variable.holding_crash or active_enemies>2)" },
        { command = "/cast Mindbender", conditions = "(dot.shadow_word_pain.ticking and variable.dots_up or action.shadow_crash.in_flight) and (not cooldown:Halo == 0 or not talent(Power Surge)) and (fight_remains<30 or ttd>15) and (not talent.dark_ascension or cooldown:Dark Ascension<gcd.max or fight_remains<15)" },
        { command = "/cast Shadow Word Death,Target If=Max:(Target.Health.Pct<=20)*100+Dot.Devouring Plague.Ticking", conditions = "priest.force_devour_matter and talent.devour_matter" },
        { command = "/cast Void Blast,Target If=Max:(Dot.Devouring Plague.Remains*1000+Target.Time To Die)", conditions = "(dot.devouring_plague.remains>=execute_time or buff:Entropic Rift<=gcd.max or action.void_torrent.channeling and talent.void_empowerment) and (insanity.deficit>=16 or cooldown.mind_blast.full_recharge_time<=gcd.max or buff:Entropic Rift<=gcd.max)" },
        { command = "/cast Devouring Plague,Target If=Max:Target.Time To Die*(Dot.Devouring Plague.Remains<=Gcd.Max|Variable.Dr Force Prio|!Talent.Distorted Reality&Variable.Me Force Prio)", conditions = "buff:Voidform > 0 and talent.perfected_form and buff:Voidform<=gcd.max and talent.void_eruption" },
        { command = "/cast Void Bolt,Target If=Max:Target.Time To Die", conditions = "insanity.deficit>16 and cooldown:Void Bolt%gcd.max<=0.1" },
        { command = "/cast Devouring Plague,Target If=Max:Target.Time To Die*(Dot.Devouring Plague.Remains<=Gcd.Max|Variable.Dr Force Prio|!Talent.Distorted Reality&Variable.Me Force Prio)", conditions = "active_dot.devouring_plague<=1 and dot.devouring_plague.remains<=gcd.max and (not talent.void_eruption or cooldown:Void Eruption>=gcd.max*3) or insanity.deficit<=35 or buff:Mind Devourer > 0 or buff:Entropic Rift > 0 or buff:Power Surge > 0 and buff.tww3_archon_4pc_helper.stack<4 and buff:Ascension > 0" },
        { command = "/cast Void Torrent,Target If=Max:(Dot.Devouring Plague.Remains*1000+Target.Time To Die)", conditions = "not variable.holding_crash and (dot.devouring_plague.remains>=2.5 and (cooldown:Dark Ascension>=12 or not talent.dark_ascension or not talent.void_blast) or cooldown:Void Eruption<=3 and talent.void_eruption),interrupt_if=not talent.entropic_rift,interrupt_immediate=1" },
        { command = "/cast Void Volley", conditions = "buff:Void Volley<=5 or buff:Entropic Rift > 0 and action.void_blast.usable_in>buff:Entropic Rift or ttd<=5" },
        { command = "/cast Mind Flay Insanity,Target If=Max:Dot.Devouring Plague.Remains", conditions = "true" },
        { command = "/cast Shadow Crash,Target If=Dot.Vampiric Touch.Refreshable", conditions = "not variable.holding_crash and not action.shadow_crash.in_flight" },
        { command = "/cast Vampiric Touch,Target If=Max:(Refreshable*10000+Target.Time To Die)*(Dot.Vampiric Touch.Ticking|!Variable.Dots Up)", conditions = "refreshable and ttd>12 and (dot.vampiric_touch.ticking or not variable.dots_up) and (variable.max_vts>0 or active_enemies=1) and (action.shadow_crash.usable_in>=dot.vampiric_touch.remains or variable.holding_crash or not action.shadow_crash.enabled) and (not action.shadow_crash.in_flight)" },
        { command = "/cast Mind Blast,Target If=Max:Dot.Devouring Plague.Remains", conditions = "(not buff.mind_devourer.react or not talent.mind_devourer or cooldown:Void Eruption == 0 and talent.void_eruption)" },
        { command = "/cast Void Volley", conditions = "true" },
        { command = "/cast Devouring Plague", conditions = "buff:Voidform > 0 and talent.void_eruption or buff:Power Surge > 0 or talent.distorted_reality" },
        { command = "/cast Halo", conditions = "spell_targets>1" },
        { command = "/cast Call Action List,Name=Heal For Tof", conditions = "not buff:Twist Of Fate > 0 and buff:Twist Of Fate Can Trigger On Ally Heal > 0 and (talent.rhapsody or talent.divine_star or talent.halo)" },
        { command = "/cast Shadow Crash", conditions = "not variable.holding_crash and raid_event.adds.in>=30 and talent.descending_darkness and raid_event.movement.in>=30" },
        { command = "/cast Shadow Word Death,Target If=Target.Health.Pct<(20+15*Talent.Deathspeaker)", conditions = "true" },
        { command = "/cast Shadow Word Death,Target If=Min:Target.Time To Die", conditions = "talent.inescapable_torment and pet.fiend.active" },
        { command = "/cast Mind Flay,Target If=Max:Dot.Devouring Plague.Remains,Chain=1,Interrupt Immediate=1,Interrupt If=Ticks>=2,Interrupt Global=1", conditions = "true" },
        { command = "/cast Divine Star", conditions = "true" },
        { command = "/cast Shadow Crash", conditions = "raid_event.adds.in>20" },
        { command = "/cast Shadow Word Death,Target If=Target.Health.Pct<20", conditions = "true" },
        { command = "/cast Shadow Word Death,Target If=Max:Dot.Devouring Plague.Remains", conditions = "true" },
        { command = "/cast Shadow Word Pain,Target If=Min:Remains", conditions = "true" },
        -- SimC List: aoe (2 actions)
        { command = "/cast Vampiric Touch,Target If=Refreshable&Target.Time To Die>=18&(Dot.Vampiric Touch.Ticking|!Variable.Dots Up)", conditions = "(variable.max_vts>0 and not variable.manual_vts_applied and not action.shadow_crash.in_flight) and not buff:Entropic Rift > 0" },
        { command = "/cast Shadow Crash", conditions = "not variable.holding_crash,target_if=dot.vampiric_touch.refreshable or dot.vampiric_touch.remains<=ttd and not buff:Voidform > 0 and (raid_event.adds.in-dot.vampiric_touch.remains)<15" },
    },
}

SkillWeaver.Reference["Paladin_Retribution"] = {
    ["Default_Main"] = {
        -- SimC List: default (3 actions)
        { command = "/cast Rebuke", conditions = "true" },
        { command = "/cast Call Action List,Name=Cooldowns", conditions = "true" },
        { command = "/cast Call Action List,Name=Generators", conditions = "true" },
        -- SimC List: cooldowns (13 actions)
        { command = "/cast Invoke External Buff,Name=Power Infusion", conditions = "buff:Avenging Wrath > 0 or buff:Crusade > 0 or debuff:Execution Sentence > 0" },
        { command = "/cast Lights Judgment", conditions = "spell_targets.lights_judgment>=2 or not raid_event.adds.exists or raid_event.adds.in>75 or raid_event.adds.up" },
        { command = "/cast Fireblood", conditions = "buff:Avenging Wrath > 0 or buff:Crusade > 0 and buff.crusade.stack=10 or debuff:Execution Sentence > 0" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "((buff:Avenging Wrath > 0 and cooldown:Avenging Wrath>40 or buff:Crusade > 0 and buff.crusade.stack=10) and not talent.radiant_glory or talent.radiant_glory and (not talent.execution_sentence and cooldown:Wake Of Ashes=0 or debuff:Execution Sentence > 0)) and (not trinket.2.has_cooldown or trinket.2.cooldown.remains or variable.trinket_priority=1) or trinket.1.proc.any_dps.duration>=fight_remains" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "((buff:Avenging Wrath > 0 and cooldown:Avenging Wrath>40 or buff:Crusade > 0 and buff.crusade.stack=10) and not talent.radiant_glory or talent.radiant_glory and (not talent.execution_sentence and cooldown:Wake Of Ashes=0 or debuff:Execution Sentence > 0)) and (not trinket.1.has_cooldown or trinket.1.cooldown.remains or variable.trinket_priority=2) or trinket.2.proc.any_dps.duration>=fight_remains" },
        { command = "/cast Use Item,Name=Bestinslots", conditions = "((buff:Avenging Wrath > 0 and cooldown:Avenging Wrath>40 or buff:Crusade > 0 and buff.crusade.stack=10) and not talent.radiant_glory or talent.radiant_glory and (not talent.execution_sentence and cooldown:Wake Of Ashes=0 or debuff:Execution Sentence > 0))" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "not variable.trinket_1_buffs and (trinket.2.cooldown.remains or not variable.trinket_2_buffs or not buff:Crusade > 0 and cooldown:Crusade>20 or not buff:Avenging Wrath > 0 and cooldown:Avenging Wrath>20)" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "not variable.trinket_2_buffs and (trinket.1.cooldown.remains or not variable.trinket_1_buffs or not buff:Crusade > 0 and cooldown:Crusade>20 or not buff:Avenging Wrath > 0 and cooldown:Avenging Wrath>20)" },
        { command = "/cast Shield Of Vengeance", conditions = "fight_remains>15 and (not talent.execution_sentence or not debuff:Execution Sentence > 0) and not buff:Divine Hammer > 0" },
        { command = "/cast Execution Sentence", conditions = "(not buff:Crusade > 0 and cooldown:Crusade>15 or buff.crusade.stack=10 or cooldown:Avenging Wrath<0.75 or cooldown:Avenging Wrath>15 or talent.radiant_glory) and (holy_power>=4 and time<5 or holy_power>=3 and time>5 or (holy_power>=2 or time<5) and (talent.divine_auxiliary or talent.radiant_glory)) and (cooldown:Divine Hammer>5 or buff:Divine Hammer > 0 or not talent.divine_hammer) and (ttd>8 and not talent.executioners_will or ttd>12) and cooldown:Wake Of Ashes<gcd" },
        { command = "/cast Avenging Wrath", conditions = "(holy_power>=4 and time<5 or holy_power>=3 and time>5 or holy_power>=2 and talent.divine_auxiliary and (cooldown:Execution Sentence=0 or cooldown:Final Reckoning=0)) and (not raid_event.adds.up or ttd>10)" },
        { command = "/cast Crusade", conditions = "holy_power>=5 and time<5 or holy_power>=3 and time>5" },
        { command = "/cast Final Reckoning", conditions = "(holy_power>=4 and time<8 or holy_power>=3 and time>=8 or holy_power>=2 and (talent.divine_auxiliary or talent.radiant_glory)) and (cooldown:Avenging Wrath>10 or cooldown:Crusade and (not buff:Crusade > 0 or buff.crusade.stack>=10) or talent.radiant_glory and (buff:Avenging Wrath > 0 or talent.crusade and cooldown:Wake Of Ashes<gcd)) and (not raid_event.adds.exists or raid_event.adds.up or raid_event.adds.in>40) and (cooldown:Divine Hammer>5 or buff:Divine Hammer > 0 or not talent.divine_hammer)" },
        -- SimC List: generators (17 actions)
        { command = "/cast Templar Slash", conditions = "buff:Templar Strikes<gcd*2" },
        { command = "/cast Blade Of Justice", conditions = "not dot.expurgation.ticking and talent.holy_flames and cooldown:Divine Toll" },
        { command = "/cast Wake Of Ashes", conditions = "(not talent.lights_guidance or holy_power>=2 and talent.lights_guidance) and (cooldown:Avenging Wrath>6 or cooldown:Crusade>6 or talent.radiant_glory) and (not talent.execution_sentence or cooldown:Execution Sentence>4 or ttd<8) and (not talent.final_reckoning or cooldown:Final Reckoning>4) and (not raid_event.adds.exists or raid_event.adds.in>10 or raid_event.adds.up)" },
        { command = "/cast Divine Toll", conditions = "holy_power<=2 and (not raid_event.adds.exists or raid_event.adds.in>10 or raid_event.adds.up) and (cooldown:Avenging Wrath>15 or cooldown:Crusade>15 or talent.radiant_glory or fight_remains<8)" },
        { command = "/cast Call Action List,Name=Finishers", conditions = "holy_power>=4 or buff:Crusade > 0 and buff.crusade.stack<10 or buff:Divine Hammer > 0 or spell_targets.divine_storm>=4" },
        { command = "/cast Templar Slash", conditions = "buff:Templar Strikes<gcd and spell_targets.divine_storm>=2" },
        { command = "/cast Blade Of Justice", conditions = "spell_targets.divine_storm>=2 and talent.blade_of_vengeance" },
        { command = "/cast Hammer Of Wrath", conditions = "(spell_targets.divine_storm<2 or not talent.blessed_champion) and buff:Blessing Of Anshe > 0" },
        { command = "/cast Templar Strike", conditions = "true" },
        { command = "/cast Judgment", conditions = "true" },
        { command = "/cast Blade Of Justice", conditions = "true" },
        { command = "/cast Call Action List,Name=Finishers", conditions = "true" },
        { command = "/cast Hammer Of Wrath", conditions = "(spell_targets.divine_storm<2 or not talent.blessed_champion)" },
        { command = "/cast Templar Slash", conditions = "true" },
        { command = "/cast Crusader Strike", conditions = "true" },
        { command = "/cast Hammer Of Wrath", conditions = "true" },
        { command = "/cast Arcane Torrent", conditions = "true" },
        -- SimC List: finishers (5 actions)
        { command = "/cast Hammer Of Light", conditions = "buff:Hammer Of Light Ready > 0 or not talent.divine_hammer or buff:Divine Hammer > 0 or cooldown:Divine Hammer>10" },
        { command = "/cast Divine Hammer", conditions = "not buff:Divine Hammer > 0" },
        { command = "/cast Divine Storm", conditions = "variable.ds_castable and (not buff:Hammer Of Light Ready > 0 or buff:Empyrean Power > 0) and (cooldown:Divine Hammer or buff:Divine Hammer > 0 or not talent.divine_hammer) and (not talent.crusade or cooldown:Crusade>gcd*3 or buff:Crusade > 0 and buff.crusade.stack<10 or talent.radiant_glory)" },
        { command = "/cast Justicars Vengeance", conditions = "(not talent.crusade or cooldown:Crusade>gcd*3 or buff:Crusade > 0 and buff.crusade.stack<10 or talent.radiant_glory) and not buff:Hammer Of Light Ready > 0 and (cooldown:Divine Hammer or buff:Divine Hammer > 0 or not talent.divine_hammer)" },
        { command = "/cast Templars Verdict", conditions = "(not talent.crusade or cooldown:Crusade>gcd*3 or buff:Crusade > 0 and buff.crusade.stack<10 or talent.radiant_glory) and not buff:Hammer Of Light Ready > 0 and (cooldown:Divine Hammer or buff:Divine Hammer > 0 or not talent.divine_hammer)" },
    },
}

SkillWeaver.Reference["Druid_Balance"] = {
    ["Kotg"] = {
        -- SimC List: kotg_pre_cd (2 actions)
        { command = "/cast Use Items", conditions = "buff:Ca Inc > 0 or fight_remains<15" },
        { command = "/cast Fury Of Elune", conditions = "not buff:Ca Inc > 0 and variable.kotg_ca_condition or cooldown:Convoke The Spirits>cooldown.fury_of_elune.duration" },
        -- SimC List: kotg_st (30 actions)
        { command = "/cast Wait", conditions = "buff:Dryad > 0 and buff:Dryad<gcd.max,sec=buff:Dryad" },
        { command = "/cast Wrath", conditions = "variable.enter_lunar and eclipse.in_eclipse and variable.eclipse_remains<cast_time or variable.kotg_ca_condition and buff:Parting Skies > 0 and (variable.eclipse_remains<cast_time or eclipse.in_none)" },
        { command = "/cast Starfire", conditions = "not variable.enter_lunar and eclipse.in_eclipse and variable.eclipse_remains<cast_time and not buff:Dryads Favor > 0 and not variable.kotg_ca_condition" },
        { command = "/cast Moonfire,Target If=(Remains<3&(!Talent.Treants Of The Moon|Cooldown.Force Of Nature.Remains>3&!Buff.Harmony Of The Grove.Up))|!Dot.Moonfire.Ticking", conditions = "true" },
        { command = "/cast Sunfire,Target If=Remains<3|Remains<(12>?Buff.Ca Inc.Duration)&Variable.Kotg Ca Condition&!Buff.Ca Inc.Up", conditions = "true" },
        { command = "/cast Call Action List,Name=Kotg Pre Cd", conditions = "true" },
        { command = "/cast Celestial Alignment", conditions = "variable.kotg_ca_condition" },
        { command = "/cast Incarnation", conditions = "variable.kotg_ca_condition" },
        { command = "/cast Starsurge", conditions = "buff:Dryads Favor > 0 and buff:Ca Inc > 0" },
        { command = "/cast Wrath", conditions = "variable.enter_lunar and (eclipse.in_none or variable.eclipse_remains<cast_time)" },
        { command = "/cast Starfire", conditions = "not variable.enter_lunar and (eclipse.in_none or variable.eclipse_remains<cast_time)" },
        { command = "/cast Stellar Flare", conditions = "remains<=buff.ca_inc.duration and variable.pool_for_cd or remains<=buff:Ca Inc > 0 and not buff:Dryads Favor > 0" },
        { command = "/cast Wrath", conditions = "variable.pool_for_cd" },
        { command = "/cast Force Of Nature", conditions = "buff:Dryad > 0 and buff.harmony_of_the_grove.duration>buff:Dryad+gcd.max*2 or cooldown.force_of_nature.duration<cooldown:Convoke The Spirits+(15*talent.control_of_the_dream) or fight_remains<buff.harmony_of_the_grove.duration+gcd.max" },
        { command = "/cast Fury Of Elune", conditions = "5+variable.passive_asp<astral_power.deficit and (cooldown:Convoke The Spirits>buff.fury_of_elune.duration or not talent.convoke_the_spirits) or fight_remains<8+gcd.max" },
        { command = "/cast Starfall", conditions = "buff:Starweavers Warp > 0" },
        { command = "/cast Starsurge", conditions = "talent.starlord and buff.starlord.stack<3 and not variable.pool_in_ca" },
        { command = "/cast Sunfire,Target If=Refreshable", conditions = "true" },
        { command = "/cast Moonfire,Target If=Refreshable&(!Talent.Treants Of The Moon|Cooldown.Force Of Nature.Remains>3&!Buff.Harmony Of The Grove.Up)", conditions = "true" },
        { command = "/cast Starsurge", conditions = "cooldown:Convoke The Spirits<gcd.max*2 and variable.convoke_condition and astral_power.deficit<50 and buff:Dryad>8 and buff:Dryad > 0" },
        { command = "/cast Convoke The Spirits", conditions = "variable.convoke_condition and buff:Harmony Of The Grove > 0" },
        { command = "/cast Stellar Flare,Target If=Refreshable&(Target.Time To Die-Remains-Target>7+Spell Targets)&!Buff.Ca Inc.Up", conditions = "true" },
        { command = "/cast Starsurge", conditions = "(buff:Starlord>4 and variable.boat_stacks>=3 or fight_remains<4) and not variable.pool_in_ca" },
        { command = "/cast New Moon", conditions = "astral_power.deficit>variable.passive_asp+energize_amount or fight_remains<20 or cooldown:Ca Inc>15" },
        { command = "/cast Half Moon", conditions = "astral_power.deficit>variable.passive_asp+energize_amount and (buff:Eclipse Lunar>execute_time or buff:Eclipse Solar>execute_time) or fight_remains<20 or cooldown:Ca Inc>15" },
        { command = "/cast Full Moon", conditions = "astral_power.deficit>variable.passive_asp+energize_amount and (buff:Eclipse Lunar>execute_time or buff:Eclipse Solar>execute_time) or fight_remains<20 or cooldown:Ca Inc>15" },
        { command = "/cast Starsurge", conditions = "buff:Starweavers Weft > 0 or buff:Touch The Cosmos > 0" },
        { command = "/cast Starsurge", conditions = "(astral_power.deficit<variable.passive_asp+action.wrath.energize_amount+(action.starfire.energize_amount+variable.passive_asp)*(buff:Eclipse Solar<(gcd.max*2))) and not variable.pool_in_ca" },
        { command = "/cast Wild Mushroom", conditions = "not prev_gcd.1.wild_mushroom and dot.fungal_growth.remains<2" },
        { command = "/cast Wrath", conditions = "true" },
    },
    ["Default_Main"] = {
        -- SimC List: default (22 actions)
        { command = "/cast Variable,Name=Ca Effective Cd,Value=Cooldown.Ca Inc.Remains<?Cooldown.Force Of Nature.Remains", conditions = "true" },
        { command = "/cast Variable,Name=Pre Cd Condition,Value=(!Talent.Whirling Stars|!Talent.Convoke The Spirits|Cooldown.Convoke The Spirits.Remains<Gcd.Max*2|Fight Remains<Cooldown.Convoke The Spirits.Remains+3|Cooldown.Convoke The Spirits.Remains>Cooldown.Ca Inc.Full Recharge Time+15*Talent.Control Of The Dream)&(Variable.On Use Trinket=0|(Variable.On Use Trinket=1|Variable.On Use Trinket=3)&(Trinket.1.Cooldown.Remains>Cooldown.Ca Inc.Full Recharge Time+(15*Talent.Control Of The Dream)|!Talent.Convoke The Spirits&Hero Tree.Elunes Chosen&(Trinket.1.Cooldown.Duration<=100&Trinket.1.Cooldown.Remains>Cooldown.Ca Inc.Full Recharge Time-Cooldown.Ca Inc.Duration|Trinket.1.Cooldown.Duration>=100&Cooldown.Ca Inc.Charges Fractional=1&(Trinket.1.Cooldown.Duration>?Cooldown.Ca Inc.Full Recharge Time))|Talent.Convoke The Spirits&(Cooldown.Convoke The Spirits.Remains<3&(Ceil((Fight Remains-10)%Cooldown.Convoke The Spirits.Duration)>Ceil((Fight Remains-Trinket.1.Cooldown.Remains-10)%Cooldown.Convoke The Spirits.Duration))|Cooldown.Convoke The Spirits.Remains>Trinket.1.Cooldown.Remains&Cooldown.Ca Inc.Full Recharge Time-Cooldown.Ca Inc.Duration<Trinket.1.Cooldown.Remains+15)|Trinket.1.Cooldown.Remains+6>Fight Remains|Trinket.1.Cooldown.Ready)|Variable.On Use Trinket=2&(Trinket.2.Cooldown.Remains>Cooldown.Ca Inc.Full Recharge Time+(15*Talent.Control Of The Dream)|!Talent.Convoke The Spirits&Hero Tree.Elunes Chosen&(Trinket.2.Cooldown.Duration<=100&Trinket.2.Cooldown.Remains>Cooldown.Ca Inc.Full Recharge Time-Cooldown.Ca Inc.Duration|Trinket.2.Cooldown.Duration>=100&Cooldown.Ca Inc.Charges Fractional=1&(Trinket.2.Cooldown.Duration>?Cooldown.Ca Inc.Full Recharge Time))|Talent.Convoke The Spirits&(Cooldown.Convoke The Spirits.Remains<3&(Ceil((Fight Remains-10)%Cooldown.Convoke The Spirits.Duration)>Ceil((Fight Remains-Trinket.2.Cooldown.Remains-10)%Cooldown.Convoke The Spirits.Duration))|Cooldown.Convoke The Spirits.Remains>Trinket.2.Cooldown.Remains&Cooldown.Ca Inc.Full Recharge Time-Cooldown.Ca Inc.Duration<Trinket.2.Cooldown.Remains+15)|Trinket.2.Cooldown.Remains+6>Fight Remains|Trinket.2.Cooldown.Ready))&Cooldown.Ca Inc.Remains<Gcd.Max&!Buff.Ca Inc.Up", conditions = "true" },
        { command = "/cast Variable,Name=Cd Condition,Value=Variable.Pre Cd Condition&(Fight Remains<(15+5*Talent.Incarnation Chosen Of Elune)*(1-Talent.Whirling Stars*0.2)|Target.Time To Die>10&(!Hero Tree.Keeper Of The Grove|Buff.Harmony Of The Grove.Up))", conditions = "true" },
        { command = "/cast Variable,Name=Convoke Condition,Value=Fight Remains<5|(Buff.Ca Inc.Up|Cooldown.Ca Inc.Remains>40)&(!Hero Tree.Keeper Of The Grove|Buff.Harmony Of The Grove.Up|Cooldown.Force Of Nature.Remains>15)", conditions = "true" },
        { command = "/cast Variable,Name=Eclipse Remains,Value=Buff.Eclipse Lunar.Remains<?Buff.Eclipse Solar.Remains", conditions = "true" },
        { command = "/cast Variable,Name=Enter Lunar,Value=Talent.Lunar Calling|Spell Targets.Starfire>3-(Talent.Umbral Intensity|Talent.Soul Of The Forest)", conditions = "true" },
        { command = "/cast Variable,Name=Boat Stacks,Value=Buff.Balance Of All Things Arcane.Stack+Buff.Balance Of All Things Nature.Stack", conditions = "true" },
        { command = "/cast Variable,Name=Tww3 Keeper 4Pc,Value=0", conditions = "true" },
        { command = "/cast Variable,Name=Kotg Ca Condition,Value=Variable.Tww3 Keeper 4Pc&Astral Power.Deficit<=50&(Variable.On Use Trinket=1&Trinket.1.Cooldown.Ready|Variable.On Use Trinket=2&Trinket.2.Cooldown.Ready|Variable.On Use Trinket=0|Variable.On Use Trinket=3&(Trinket.1.Cooldown.Ready|Trinket.2.Cooldown.Ready))&Cooldown.Force Of Nature.Remains<Gcd.Max*4&(Cooldown.Ca Inc.Full Recharge Time<Buff.Dryad.Duration|!Buff.Ca Inc.Up&(Cooldown.Convoke The Spirits.Remains<Gcd.Max*4|!Talent.Convoke The Spirits))|Buff.Harmony Of The Grove.Up&(Buff.Dryad.Remains<Gcd.Max&Buff.Dryad.Up|Buff.Dryads Favor.Up)|Fight Remains<Buff.Ca Inc.Duration", conditions = "true" },
        { command = "/cast Variable,Name=Pool For Cd,Value=Astral Power<Action.Starsurge.Cost*3&(Variable.On Use Trinket=1&Trinket.1.Cooldown.Ready|Variable.On Use Trinket=2&Trinket.2.Cooldown.Ready|Variable.On Use Trinket=3&(Trinket.1.Cooldown.Ready|Trinket.2.Cooldown.Ready)|Variable.On Use Trinket=0)&(Cooldown.Convoke The Spirits.Ready|!Talent.Convoke The Spirits)&!Buff.Ca Inc.Up", conditions = "true" },
        { command = "/cast Variable,Name=Pool In Ca,Value=Buff.Dryad.Up&((Astral Power-Action.Starsurge.Cost)+((0<?(Buff.Dryad.Remains-Gcd.Max))*(Action.Wrath.Energize Amount%Action.Wrath.Execute Time))+Variable.Passive Asp)<Action.Starsurge.Cost*2", conditions = "true" },
        { command = "/cast Use Item,Name=Imperfect Ascendancy Serum", conditions = "dot.sunfire.remains>4 and (dot.moonfire.remains>4 or talent.treants_of_the_moon and (cooldown:Force Of Nature<3 or buff:Harmony Of The Grove > 0) and variable.ca_effective_cd<1 or fight_remains<20 or fight_remains<variable.ca_effective_cd and (buff:Harmony Of The Grove > 0 or cooldown.convoke_the_spirits.ready)) and buff.spymasters_report.stack<=29" },
        { command = "/cast Variable,Name=Generic Trinket Condition,Value=Buff.Dryad.Up|Variable.No Cd Talent|Fight Remains<Variable.Ca Effective Cd&(Buff.Harmony Of The Grove.Up|Cooldown.Convoke The Spirits.Ready)|(Buff.Spymasters Report.Stack+Variable.Ca Effective Cd%6)>29&Variable.Ca Effective Cd>20|Variable.On Use Trinket=0", conditions = "true" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "not trinket.1.is.spymasters_web and not trinket.1.is.imperfect_ascendancy_serum and not trinket.1.is.treacherous_transmitter and not trinket.1.is.soulletting_ruby and (variable.on_use_trinketnot =1 and variable.on_use_trinketnot =3 and trinket.2.cooldown.remains>20 or fight_remains<(20+20*(trinket.2.has_use and trinket.2.cooldown.remains<25)) or variable.generic_trinket_condition)" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "not trinket.2.is.spymasters_web and not trinket.2.is.imperfect_ascendancy_serum and not trinket.2.is.treacherous_transmitter and not trinket.2.is.soulletting_ruby and (variable.on_use_trinket<2 and trinket.1.cooldown.remains>20 or variable.on_use_trinket=3 and trinket.1.cooldown.remains>20 and (not hero_tree.keeper_of_the_grove or buff:Harmony Of The Grove > 0 or ceil((fight_remains-15)%trinket.2.cooldown.duration)>ceil((fight_remains-cooldown:Force Of Nature-15)%trinket.2.cooldown.duration)) or fight_remains<(20+20*(trinket.1.has_use and trinket.1.cooldown.remains<25)) or variable.generic_trinket_condition)" },
        { command = "/cast Use Items", conditions = "true" },
        { command = "/cast Potion", conditions = "fight_remains<=30" },
        { command = "/cast Invoke External Buff,Name=Power Infusion", conditions = "variable.cd_condition and not variable.tww3_keeper_4pc or variable.tww3_keeper_4pc and variable.kotg_ca_condition" },
        { command = "/cast Berserking", conditions = "variable.no_cd_talent or fight_remains<15" },
        { command = "/cast Run Action List,Name=Aoe", conditions = "spell_targets>1" },
        { command = "/cast Run Action List,Name=St", conditions = "not variable.tww3_keeper_4pc and spell_targets=1" },
        { command = "/cast Run Action List,Name=Kotg St", conditions = "variable.tww3_keeper_4pc and spell_targets=1" },
        -- SimC List: st (29 actions)
        { command = "/cast Wrath", conditions = "variable.enter_lunar and eclipse.in_eclipse and variable.eclipse_remains<cast_time and not variable.cd_condition" },
        { command = "/cast Starfire", conditions = "not variable.enter_lunar and eclipse.in_eclipse and variable.eclipse_remains<cast_time and not variable.cd_condition" },
        { command = "/cast Sunfire,Target If=Remains<3|Refreshable&(Hero Tree.Keeper Of The Grove&Cooldown.Force Of Nature.Ready|Hero Tree.Elunes Chosen&Variable.Cd Condition)", conditions = "true" },
        { command = "/cast Moonfire,Target If=Remains<3&(!Talent.Treants Of The Moon|Cooldown.Force Of Nature.Remains>3&!Buff.Harmony Of The Grove.Up)", conditions = "true" },
        { command = "/cast Call Action List,Name=Pre Cd", conditions = "true" },
        { command = "/cast Celestial Alignment", conditions = "variable.cd_condition" },
        { command = "/cast Incarnation", conditions = "variable.cd_condition" },
        { command = "/cast Wrath", conditions = "variable.enter_lunar and (eclipse.in_none or variable.eclipse_remains<cast_time)" },
        { command = "/cast Starfire", conditions = "not variable.enter_lunar and (eclipse.in_none or variable.eclipse_remains<cast_time)" },
        { command = "/cast Starsurge", conditions = "variable.cd_condition and astral_power.deficit>variable.passive_asp+action.force_of_nature.energize_amount" },
        { command = "/cast Force Of Nature", conditions = "variable.pre_cd_condition or cooldown.ca_inc.full_recharge_time+5+15*talent.control_of_the_dream>cooldown and (not talent.convoke_the_spirits or cooldown:Convoke The Spirits+10+15*talent.control_of_the_dream>cooldown or fight_remains<cooldown:Convoke The Spirits+cooldown.convoke_the_spirits.duration+5) and (variable.on_use_trinket=0 or cooldown:Ca Inc>20 or talent.convoke_the_spirits and cooldown:Convoke The Spirits>20 or (variable.on_use_trinket=1 or variable.on_use_trinket=3) and (trinket.1.cooldown.remains>5+15*talent.control_of_the_dream or trinket.1.cooldown.ready) or variable.on_use_trinket=2 and (trinket.2.cooldown.remains>5+15*talent.control_of_the_dream or trinket.2.cooldown.ready)) and (fight_remains>cooldown+5 or fight_remains<cooldown:Ca Inc+7) or talent.whirling_stars and talent.convoke_the_spirits and cooldown:Convoke The Spirits>cooldown.force_of_nature.duration-10 and fight_remains>cooldown:Convoke The Spirits+6" },
        { command = "/cast Fury Of Elune", conditions = "5+variable.passive_asp<astral_power.deficit" },
        { command = "/cast Starfall", conditions = "buff:Starweavers Warp > 0" },
        { command = "/cast Starsurge", conditions = "talent.starlord and buff.starlord.stack<3" },
        { command = "/cast Sunfire,Target If=Refreshable", conditions = "true" },
        { command = "/cast Moonfire,Target If=Refreshable&(!Talent.Treants Of The Moon|Cooldown.Force Of Nature.Remains>3&!Buff.Harmony Of The Grove.Up)", conditions = "true" },
        { command = "/cast Starsurge", conditions = "cooldown:Convoke The Spirits<gcd.max*2 and variable.convoke_condition and astral_power.deficit<50" },
        { command = "/cast Convoke The Spirits", conditions = "variable.convoke_condition" },
        { command = "/cast Stellar Flare,Target If=Refreshable&(Target.Time To Die-Remains-Target>7+Spell Targets)", conditions = "true" },
        { command = "/cast Starsurge", conditions = "buff:Starlord>4 and variable.boat_stacks>=3 or fight_remains<4" },
        { command = "/cast New Moon", conditions = "astral_power.deficit>variable.passive_asp+energize_amount or fight_remains<20 or cooldown:Ca Inc>15" },
        { command = "/cast Half Moon", conditions = "astral_power.deficit>variable.passive_asp+energize_amount and (buff:Eclipse Lunar>execute_time or buff:Eclipse Solar>execute_time) or fight_remains<20 or cooldown:Ca Inc>15" },
        { command = "/cast Full Moon", conditions = "astral_power.deficit>variable.passive_asp+energize_amount and (buff:Eclipse Lunar>execute_time or buff:Eclipse Solar>execute_time) or fight_remains<20 or cooldown:Ca Inc>15" },
        { command = "/cast Starsurge", conditions = "buff:Starweavers Weft > 0 or buff:Touch The Cosmos > 0" },
        { command = "/cast Starsurge", conditions = "astral_power.deficit<variable.passive_asp+action.wrath.energize_amount+(action.starfire.energize_amount+variable.passive_asp)*(buff:Eclipse Solar<(gcd.max*3))" },
        { command = "/cast Force Of Nature", conditions = "not hero_tree.keeper_of_the_grove" },
        { command = "/cast Wild Mushroom", conditions = "not prev_gcd.1.wild_mushroom and dot.fungal_growth.remains<2" },
        { command = "/cast Starfire", conditions = "talent.lunar_calling" },
        { command = "/cast Wrath", conditions = "true" },
        -- SimC List: aoe (27 actions)
        { command = "/cast Wrath", conditions = "variable.enter_lunar and eclipse.in_eclipse and variable.eclipse_remains<cast_time" },
        { command = "/cast Starfire", conditions = "not variable.enter_lunar and eclipse.in_eclipse and variable.eclipse_remains<cast_time" },
        { command = "/cast Starfall", conditions = "astral_power.deficit<=variable.passive_asp+6" },
        { command = "/cast Moonfire,Target If=Refreshable&(Target.Time To Die-Remains)>6&(!Talent.Treants Of The Moon|Spell Targets-Active Dot.Moonfire Dmg>6|Cooldown.Force Of Nature.Remains>3&!Buff.Harmony Of The Grove.Up)", conditions = "fight_style.dungeonroute or fight_style.dungeonslice" },
        { command = "/cast Sunfire,Target If=Refreshable&(Target.Time To Die-Remains)>6-(Spell Targets%2)", conditions = "true" },
        { command = "/cast Moonfire,Target If=Refreshable&(Target.Time To Die-Remains)>6&(!Talent.Treants Of The Moon|Spell Targets-Active Dot.Moonfire Dmg>6|Cooldown.Force Of Nature.Remains>3&!Buff.Harmony Of The Grove.Up)", conditions = "not fight_style.dungeonroute and not fight_style.dungeonslice" },
        { command = "/cast Wrath", conditions = "variable.enter_lunar and (eclipse.in_none or variable.eclipse_remains<cast_time) and not variable.pre_cd_condition" },
        { command = "/cast Starfire", conditions = "not variable.enter_lunar and (eclipse.in_none or variable.eclipse_remains<cast_time)" },
        { command = "/cast Stellar Flare,Target If=Refreshable&(Target.Time To Die-Remains-Target>7+Spell Targets)", conditions = "spell_targets<(11-talent.umbral_intensity.rank-(2*talent.astral_smolder)-talent.lunar_calling)" },
        { command = "/cast Force Of Nature", conditions = "variable.pre_cd_condition or cooldown.ca_inc.full_recharge_time+5+15*talent.control_of_the_dream>cooldown and (not talent.convoke_the_spirits or cooldown:Convoke The Spirits+10+15*talent.control_of_the_dream>cooldown or fight_remains<cooldown:Convoke The Spirits+cooldown.convoke_the_spirits.duration+5) and (variable.on_use_trinket=0 or (variable.on_use_trinket=1 or variable.on_use_trinket=3) and (trinket.1.cooldown.remains>5+15*talent.control_of_the_dream or cooldown:Ca Inc>20 or trinket.1.cooldown.ready) or variable.on_use_trinket=2 and (trinket.2.cooldown.remains>5+15*talent.control_of_the_dream or cooldown:Ca Inc>20 or trinket.2.cooldown.ready)) and (fight_remains>cooldown+5 or fight_remains<cooldown:Ca Inc+7) or talent.whirling_stars and talent.convoke_the_spirits and cooldown:Convoke The Spirits>cooldown.force_of_nature.duration-10 and fight_remains>cooldown:Convoke The Spirits+6" },
        { command = "/cast Fury Of Elune", conditions = "eclipse.in_eclipse" },
        { command = "/cast Call Action List,Name=Pre Cd", conditions = "true" },
        { command = "/cast Celestial Alignment", conditions = "variable.cd_condition" },
        { command = "/cast Incarnation", conditions = "variable.cd_condition" },
        { command = "/cast Warrior Of Elune", conditions = "not talent.lunar_calling and buff:Eclipse Solar<7 or talent.lunar_calling and not buff:Dreamstate > 0" },
        { command = "/cast Starfire", conditions = "(not talent.lunar_calling and spell_targets.starfire=1) and (buff:Eclipse Solar > 0 and buff:Eclipse Solar<action.starfire.cast_time or eclipse.in_none)" },
        { command = "/cast Starfall", conditions = "buff:Starweavers Warp > 0 or buff:Touch The Cosmos > 0" },
        { command = "/cast Starsurge", conditions = "buff:Starweavers Weft > 0" },
        { command = "/cast Starfall", conditions = "true" },
        { command = "/cast Convoke The Spirits", conditions = "(not buff:Dreamstate > 0 and not buff:Umbral Embrace > 0 and spell_targets.starfire<7 or spell_targets.starfire=1) and (fight_remains<5 or (buff:Ca Inc > 0 or cooldown:Ca Inc>40) and (not hero_tree.keeper_of_the_grove or buff:Harmony Of The Grove > 0 or cooldown:Force Of Nature>15))" },
        { command = "/cast New Moon", conditions = "true" },
        { command = "/cast Half Moon", conditions = "true" },
        { command = "/cast Full Moon", conditions = "true" },
        { command = "/cast Wild Mushroom", conditions = "not prev_gcd.1.wild_mushroom and not dot.fungal_growth.ticking" },
        { command = "/cast Force Of Nature", conditions = "not hero_tree.keeper_of_the_grove" },
        { command = "/cast Starfire", conditions = "talent.lunar_calling or buff:Eclipse Lunar > 0 and spell_targets.starfire>3-(talent.umbral_intensity or talent.soul_of_the_forest)" },
        { command = "/cast Wrath", conditions = "true" },
    },
}

SkillWeaver.Reference["Shaman_Enhancement"] = {
    ["Totemic"] = {
        -- SimC List: aoe_totemic (41 actions)
        { command = "/cast Surging Totem", conditions = "true" },
        { command = "/cast Ascendance", conditions = "ti_chain_lightning" },
        { command = "/cast Crash Lightning", conditions = "talent(Crashing Storms) and (active_enemies>=15-5*talent(Unruly Winds))" },
        { command = "/cast Feral Spirit", conditions = "(cooldown:Doom Winds>15 or cooldown:Doom Winds<=7) or buff.earthen_weapon.stack>=2" },
        { command = "/cast Primordial Storm", conditions = "(buff.maelstrom_weapon.stack>=10) and (buff:Doom Winds<=gcd*3 or not buff:Doom Winds > 0 and cooldown:Doom Winds>buff:Primordial Storm or buff.earthen_weapon.stack>=4 or buff:Earthen Weapon<=gcd*3)" },
        { command = "/cast Flame Shock", conditions = "not ticking and (talent(Ashen Catalyst) or talent(Primordial Wave)) and not variable.flame_shock_saturated" },
        { command = "/cast Doom Winds", conditions = "true" },
        { command = "/cast Primordial Wave", conditions = "dot.flame_shock.ticking and variable.flame_shock_saturated" },
        { command = "/cast Windstrike", conditions = "true" },
        { command = "/cast Lava Lash", conditions = "buff:Hot Hand > 0" },
        { command = "/cast Totemic Recall", conditions = "(not buff:Whirling Air > 0 and not buff:Whirling Fire > 0 and not buff:Whirling Earth > 0) and pet.surging_totem.remains>=10" },
        { command = "/cast Crash Lightning", conditions = "buff.electrostatic_wager.stack>8" },
        { command = "/cast Sundering", conditions = "buff:Doom Winds > 0 or talent(Earthsurge) and (buff:Legacy Of The Frost Witch > 0 or not talent(Legacy Of The Frost Witch)) and pet.surging_totem.active" },
        { command = "/cast Chain Lightning", conditions = "buff.maelstrom_weapon.stack>=10 and buff.electrostatic_wager.stack>4 and not buff:Cl Crash Lightning > 0 and buff:Doom Winds > 0" },
        { command = "/cast Elemental Blast", conditions = "buff.maelstrom_weapon.stack>=10" },
        { command = "/cast Chain Lightning", conditions = "buff.maelstrom_weapon.stack>=10 and ((buff:Doom Winds>=gcd*3 and buff:Primordial Storm > 0) or not buff:Primordial Storm > 0)" },
        { command = "/cast Crash Lightning", conditions = "buff:Doom Winds > 0 or not buff:Crash Lightning > 0 or (talent(Alpha Wolf) and feral_spirit.active and alpha_wolf_min_remains=0)" },
        { command = "/cast Voltaic Blaze", conditions = "true" },
        { command = "/cast Fire Nova", conditions = "(dot.flame_shock.ticking and variable.flame_shock_saturated) and pet.searing_totem.active" },
        { command = "/cast Lava Lash", conditions = "talent(Molten Assault) and dot.flame_shock.ticking" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0 and pet.searing_totem.active" },
        { command = "/cast Crash Lightning", conditions = "talent(Crashing Storms)" },
        { command = "/cast Fire Nova", conditions = "dot.flame_shock.ticking and variable.flame_shock_saturated" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0" },
        { command = "/cast Crash Lightning", conditions = "true" },
        { command = "/cast Ice Strike", conditions = "talent(Hailstorm) and not buff:Ice Strike > 0" },
        { command = "/cast Elemental Blast", conditions = "buff.maelstrom_weapon.stack>=5 and not buff:Primordial Storm > 0 and ((buff:Doom Winds>=gcd*3 and buff:Primordial Storm > 0) or not buff:Primordial Storm > 0)" },
        { command = "/cast Chain Lightning", conditions = "buff.maelstrom_weapon.stack>=5 and not buff:Primordial Storm > 0 and ((buff:Doom Winds>=gcd*3 and buff:Primordial Storm > 0) or not buff:Primordial Storm > 0)" },
        { command = "/cast Stormstrike", conditions = "true" },
        { command = "/cast Sundering", conditions = "buff:Doom Winds > 0 or talent(Earthsurge) and (buff:Legacy Of The Frost Witch > 0 or not talent(Legacy Of The Frost Witch)) and pet.surging_totem.active" },
        { command = "/cast Fire Nova", conditions = "variable.flame_shock_saturated and active_enemies>=4" },
        { command = "/cast Voltaic Blaze", conditions = "true" },
        { command = "/cast Ice Strike", conditions = "talent(Hailstorm) and not buff:Ice Strike > 0" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0" },
        { command = "/cast Sundering", conditions = "(buff:Legacy Of The Frost Witch > 0 or not talent(Legacy Of The Frost Witch)) and pet.surging_totem.active" },
        { command = "/cast Flame Shock", conditions = "talent(Molten Assault) and not ticking" },
        { command = "/cast Fire Nova", conditions = "active_dot.flame_shock>=3" },
        { command = "/cast Ice Strike", conditions = "true" },
        { command = "/cast Lava Lash", conditions = "true" },
        { command = "/cast Crash Lightning", conditions = "true" },
        { command = "/cast Flame Shock", conditions = "not ticking" },
        -- SimC List: aoe_totemic_open (30 actions)
        { command = "/cast Lava Lash", conditions = "not pet.surging_totem.active and not variable.flame_shock_saturated" },
        { command = "/cast Surging Totem", conditions = "not buff:Whirling Air > 0 and not buff:Whirling Fire > 0 and not buff:Whirling Earth > 0" },
        { command = "/cast Totemic Recall", conditions = "true" },
        { command = "/cast Flame Shock", conditions = "not ticking" },
        { command = "/cast Fire Nova", conditions = "talent(Swirling Maelstrom) and dot.flame_shock.ticking and variable.flame_shock_saturated" },
        { command = "/cast Primordial Wave", conditions = "dot.flame_shock.ticking and variable.flame_shock_saturated" },
        { command = "/cast Elemental Blast", conditions = "buff.maelstrom_weapon.stack>=10 and not buff:Legacy Of The Frost Witch > 0 and cooldown:Doom Winds=0" },
        { command = "/cast Doom Winds", conditions = "buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Crash Lightning", conditions = "(buff.electrostatic_wager.stack>9 and buff:Doom Winds > 0) or not buff:Crash Lightning > 0" },
        { command = "/cast Primordial Storm", conditions = "(buff.maelstrom_weapon.stack>=10) and (buff:Doom Winds<=gcd.max or not buff:Doom Winds > 0 and cooldown:Doom Winds>buff:Primordial Storm)" },
        { command = "/cast Lava Lash", conditions = "buff:Hot Hand > 0" },
        { command = "/cast Sundering", conditions = "buff:Legacy Of The Frost Witch > 0 or (buff.earthen_weapon.stack>=2 and buff:Primordial Storm > 0)" },
        { command = "/cast Lava Lash", conditions = "(buff:Legacy Of The Frost Witch > 0 and buff:Whirling Fire > 0)" },
        { command = "/cast Crash Lightning", conditions = "(buff.earthen_weapon.stack>=2 and buff:Primordial Storm > 0 and buff:Doom Winds > 0)" },
        { command = "/cast Elemental Blast", conditions = "buff.maelstrom_weapon.stack>=10" },
        { command = "/cast Chain Lightning", conditions = "buff.maelstrom_weapon.stack>=10" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0 and pet.searing_totem.active" },
        { command = "/cast Fire Nova", conditions = "pet.searing_totem.active and dot.flame_shock.ticking and variable.flame_shock_saturated" },
        { command = "/cast Ice Strike", conditions = "true" },
        { command = "/cast Stormstrike", conditions = "buff.maelstrom_weapon.stack<10 and not buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Lava Lash", conditions = "true" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0 and pet.searing_totem.active" },
        { command = "/cast Crash Lightning", conditions = "talent(Crashing Storms)" },
        { command = "/cast Fire Nova", conditions = "dot.flame_shock.ticking and variable.flame_shock_saturated" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0" },
        { command = "/cast Crash Lightning", conditions = "true" },
        { command = "/cast Ice Strike", conditions = "talent(Hailstorm) and not buff:Ice Strike > 0" },
        { command = "/cast Elemental Blast", conditions = "buff.maelstrom_weapon.stack>=5 and not buff:Primordial Storm > 0" },
        { command = "/cast Chain Lightning", conditions = "buff.maelstrom_weapon.stack>=5 and not buff:Primordial Storm > 0" },
        { command = "/cast Stormstrike", conditions = "true" },
        -- SimC List: single_totemic (32 actions)
        { command = "/cast Surging Totem", conditions = "true" },
        { command = "/cast Ascendance", conditions = "ti_lightning_bolt and pet.surging_totem.remains>4 and (buff.totemic_rebound.stack>=3 or buff.maelstrom_weapon.stack>0)" },
        { command = "/cast Flame Shock", conditions = "not ticking and (talent(Ashen Catalyst) or talent(Primordial Wave))" },
        { command = "/cast Lava Lash", conditions = "buff:Hot Hand > 0" },
        { command = "/cast Totemic Recall", conditions = "(not buff:Whirling Air > 0 and not buff:Whirling Fire > 0 and not buff:Whirling Earth > 0) and pet.surging_totem.remains>=10" },
        { command = "/cast Feral Spirit", conditions = "((cooldown:Doom Winds>23 or cooldown:Doom Winds<7) and (cooldown:Primordial Wave<20 or buff:Primordial Storm > 0 or not talent(Primordial Storm)))" },
        { command = "/cast Primordial Wave", conditions = "dot.flame_shock.ticking and (raid_event.adds.in>action.primordial_wave.cooldown) or raid_event.adds.in<6" },
        { command = "/cast Doom Winds", conditions = "buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Primordial Storm", conditions = "(buff.maelstrom_weapon.stack>=10) and ((cooldown:Doom Winds>=buff:Primordial Storm) or buff:Doom Winds > 0 or not talent(Doom Winds) or (buff:Primordial Storm<2*gcd))" },
        { command = "/cast Sundering", conditions = "buff:Ascendance > 0 and pet.surging_totem.active and talent(Earthsurge) and buff:Legacy Of The Frost Witch > 0 and buff.totemic_rebound.stack>=5 and buff.earthen_weapon.stack>=2" },
        { command = "/cast Windstrike", conditions = "talent(Thorims Invocation) and buff.maelstrom_weapon.stack>0 and ti_lightning_bolt" },
        { command = "/cast Sundering", conditions = "buff:Legacy Of The Frost Witch > 0 and ((cooldown:Ascendance>=10 and talent(Ascendance)) or not talent(Ascendance)) and pet.surging_totem.active and buff.totemic_rebound.stack>=3 and not buff:Ascendance > 0" },
        { command = "/cast Crash Lightning", conditions = "talent(Unrelenting Storms) and talent(Alpha Wolf) and alpha_wolf_min_remains=0" },
        { command = "/cast Lava Burst", conditions = "not talent(Thorims Invocation) and buff.maelstrom_weapon.stack>=10 and buff:Whirling Air == 0" },
        { command = "/cast Elemental Blast", conditions = "(buff.maelstrom_weapon.stack>=10) and (buff:Primordial Storm == 0 or buff:Primordial Storm>4)" },
        { command = "/cast Stormstrike", conditions = "buff:Doom Winds > 0 and buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Lightning Bolt", conditions = "(buff.maelstrom_weapon.stack>=10) and (buff:Primordial Storm == 0 or buff:Primordial Storm>4)" },
        { command = "/cast Crash Lightning", conditions = "buff.electrostatic_wager.stack>4" },
        { command = "/cast Stormstrike", conditions = "buff:Doom Winds > 0 or buff.stormblast.stack>1" },
        { command = "/cast Lava Lash", conditions = "buff:Whirling Fire > 0 or buff.ashen_catalyst.stack>=8" },
        { command = "/cast Windstrike", conditions = "true" },
        { command = "/cast Stormstrike", conditions = "true" },
        { command = "/cast Lava Lash", conditions = "true" },
        { command = "/cast Crash Lightning", conditions = "set_bonus.tww2_4pc" },
        { command = "/cast Voltaic Blaze", conditions = "true" },
        { command = "/cast Crash Lightning", conditions = "talent(Unrelenting Storms)" },
        { command = "/cast Ice Strike", conditions = "not buff:Ice Strike > 0" },
        { command = "/cast Crash Lightning", conditions = "true" },
        { command = "/cast Frost Shock", conditions = "true" },
        { command = "/cast Fire Nova", conditions = "active_dot.flame_shock" },
        { command = "/cast Earth Elemental", conditions = "true" },
        { command = "/cast Flame Shock", conditions = "not talent(Voltaic Blaze)" },
        -- SimC List: single_totemic_open (14 actions)
        { command = "/cast Lava Lash", conditions = "not pet.surging_totem.active and talent(Lashing Flames) and debuff:Lashing Flames == 0" },
        { command = "/cast Surging Totem", conditions = "not buff:Whirling Air > 0 and not buff:Whirling Fire > 0 and not buff:Whirling Earth > 0" },
        { command = "/cast Totemic Recall", conditions = "true" },
        { command = "/cast Primordial Wave", conditions = "true" },
        { command = "/cast Feral Spirit", conditions = "buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Lava Lash", conditions = "buff:Hot Hand > 0 or (buff:Whirling Fire > 0 and cooldown:Surging Totem == 0 and not buff:Doom Winds<=2)" },
        { command = "/cast Primordial Storm", conditions = "buff:Doom Winds > 0 and buff.maelstrom_weapon.max_stack and buff:Legacy Of The Frost Witch > 0 or (buff:Primordial Storm<=3 and buff.maelstrom_weapon.max_stack)" },
        { command = "/cast Doom Winds", conditions = "buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Stormstrike", conditions = "buff:Doom Winds > 0 and buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Sundering", conditions = "buff:Legacy Of The Frost Witch > 0" },
        { command = "/cast Elemental Blast", conditions = "buff.maelstrom_weapon.stack=10" },
        { command = "/cast Lightning Bolt", conditions = "buff.maelstrom_weapon.stack=10" },
        { command = "/cast Stormstrike", conditions = "true" },
        { command = "/cast Lava Lash", conditions = "true" },
    },
    ["Default_Main"] = {
        -- SimC List: default (28 actions)
        { command = "/cast Variable,Name=Target Nature Mod,Value=(1+Debuff.Chaos Brand.Up*Debuff.Chaos Brand.Value)*(1+(Debuff.Hunters Mark.Up*Target.Health.Pct>=80)*Debuff.Hunters Mark.Value)", conditions = "true" },
        { command = "/cast Variable,Name=Expected Lb Funnel,Value=Action.Lightning Bolt.Damage*(1+Debuff.Lightning Rod.Up*Variable.Target Nature Mod*(1+Buff.Primordial Wave.Up*Active Dot.Flame Shock*Buff.Primordial Wave.Value)*Debuff.Lightning Rod.Value)", conditions = "true" },
        { command = "/cast Variable,Name=Expected Cl Funnel,Value=Action.Chain Lightning.Damage*(1+Debuff.Lightning Rod.Up*Variable.Target Nature Mod*(Active Enemies>?(3+2*Talent.Crashing Storms.Enabled))*Debuff.Lightning Rod.Value)", conditions = "true" },
        { command = "/cast Variable,Name=Flame Shock Saturated,Value=((Active Dot.Flame Shock=Active Enemies)|(Active Dot.Flame Shock=6))", conditions = "true" },
        { command = "/cast Bloodlust,Line Cd=600", conditions = "true" },
        { command = "/cast Potion", conditions = "(buff:Ascendance > 0 or buff:Feral Spirit > 0 or buff:Doom Winds > 0 or (fight_remains%%300<=30) or (not talent(Ascendance) and not talent(Feral Spirit) and not talent(Doom Winds)))" },
        { command = "/cast Auto Attack", conditions = "true" },
        { command = "/cast Use Item,Name=Elementium Pocket Anvil,Use Off Gcd=1", conditions = "true" },
        { command = "/cast Use Item,Name=Algethar Puzzle Box,Use Off Gcd=1", conditions = "(not buff:Ascendance > 0 and not buff:Feral Spirit > 0 and not buff:Doom Winds > 0) or (talent(Ascendance) and (cooldown:Ascendance<2*action.stormstrike.gcd)) or (fight_remains%%180<=30)" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "not variable.trinket1_is_weird and ((talent(Ascendance) and (buff:Ascendance>12.5 or cooldown:Ascendance>fight_remains)) or (talent(Deeply Rooted Elements) and (buff:Ascendance > 0 or trinket.1.has_use_buff and fight_remains=20)))" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "not variable.trinket2_is_weird and ((talent(Ascendance) and (buff:Ascendance>12.5 or cooldown:Ascendance>fight_remains)) or (talent(Deeply Rooted Elements) and (buff:Ascendance > 0 or trinket.2.has_use_buff and fight_remains=20)))" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "not variable.trinket1_is_weird and (not talent(Ascendance) and not talent(Deeply Rooted Elements)) and ((trinket.1.has_use_buff and fight_remains<=20) or (buff:Splintered Elements > 0 or buff:Doom Winds > 0 or buff:Feral Spirit > 0 or (not talent(Splintered Elements) and not talent(Doom Winds) and not talent(Feral Spirit))) or (variable.min_talented_cd_remains>=trinket.1.cooldown.duration))" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "not variable.trinket2_is_weird and (not talent(Ascendance) and not talent(Deeply Rooted Elements)) and ((trinket.2.has_use_buff and fight_remains<=20) or (buff:Splintered Elements > 0 or buff:Doom Winds > 0 or buff:Feral Spirit > 0 or (not talent(Splintered Elements) and not talent(Doom Winds) and not talent(Feral Spirit))) or (variable.min_talented_cd_remains>=trinket.2.cooldown.duration))" },
        { command = "/cast Use Item,Name=Beacon To The Beyond,Use Off Gcd=1", conditions = "(not buff:Ascendance > 0 and not buff:Feral Spirit > 0 and not buff:Doom Winds > 0) or (fight_remains%%150<=5)" },
        { command = "/cast Use Item,Name=Manic Grieftorch,Use Off Gcd=1", conditions = "(not buff:Ascendance > 0 and not buff:Feral Spirit > 0 and not buff:Doom Winds > 0) or (fight_remains%%120<=5)" },
        { command = "/cast Use Item,Name=Unyielding Netherprism,Use Off Gcd=1", conditions = "(buff:Ascendance>7.5) or (fight_remains<=20)" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "not variable.trinket1_is_weird and not trinket.1.has_use_buff" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "not variable.trinket2_is_weird and not trinket.2.has_use_buff" },
        { command = "/cast Blood Fury", conditions = "(buff:Ascendance > 0 or buff:Feral Spirit > 0 or buff:Doom Winds > 0 or (fight_remains%%action.blood_fury.cooldown<=action.blood_fury.duration) or (variable.min_talented_cd_remains>=action.blood_fury.cooldown) or (not talent(Ascendance) and not talent(Feral Spirit) and not talent(Doom Winds)))" },
        { command = "/cast Berserking", conditions = "(buff:Ascendance > 0 or buff:Feral Spirit > 0 or buff:Doom Winds > 0 or (fight_remains%%action.berserking.cooldown<=action.berserking.duration) or (variable.min_talented_cd_remains>=action.berserking.cooldown) or (not talent(Ascendance) and not talent(Feral Spirit) and not talent(Doom Winds)))" },
        { command = "/cast Fireblood", conditions = "(buff:Ascendance > 0 or buff:Feral Spirit > 0 or buff:Doom Winds > 0 or (fight_remains%%action.fireblood.cooldown<=action.fireblood.duration) or (variable.min_talented_cd_remains>=action.fireblood.cooldown) or (not talent(Ascendance) and not talent(Feral Spirit) and not talent(Doom Winds)))" },
        { command = "/cast Ancestral Call", conditions = "(buff:Ascendance > 0 or buff:Feral Spirit > 0 or buff:Doom Winds > 0 or (fight_remains%%action.ancestral_call.cooldown<=action.ancestral_call.duration) or (variable.min_talented_cd_remains>=action.ancestral_call.cooldown) or (not talent(Ascendance) and not talent(Feral Spirit) and not talent(Doom Winds)))" },
        { command = "/cast Invoke External Buff,Name=Power Infusion", conditions = "((talent(Deeply Rooted Elements) and buff:Ascendance>7.5) or (not talent(Deeply Rooted Elements) and (buff:Ascendance > 0 or buff:Feral Spirit > 0 or buff:Doom Winds > 0)) or (fight_remains%%120<=20) or (variable.min_talented_cd_remains>=120) or (not talent(Ascendance) and not talent(Feral Spirit) and not talent(Doom Winds)))" },
        { command = "/cast Call Action List,Name=Single", conditions = "active_enemies=1 and not talent(Surging Totem)" },
        { command = "/cast Call Action List,Name=Single Totemic", conditions = "active_enemies=1 and talent(Surging Totem)" },
        { command = "/cast Call Action List,Name=Aoe", conditions = "active_enemies>1 and (rotation.standard or rotation.simple) and not talent(Surging Totem)" },
        { command = "/cast Call Action List,Name=Aoe Totemic", conditions = "active_enemies>1 and (rotation.standard or rotation.simple) and talent(Surging Totem)" },
        { command = "/cast Call Action List,Name=Funnel", conditions = "active_enemies>1 and rotation.funnel" },
        -- SimC List: aoe (42 actions)
        { command = "/cast Run Action List,Name=Aoe Open", conditions = "time<15" },
        { command = "/cast Flame Shock", conditions = "talent(Molten Assault) and not ticking" },
        { command = "/cast Primordial Wave", conditions = "dot.flame_shock.ticking and variable.flame_shock_saturated and (buff:Tempest > 0 or tempest_mael_count<=35)" },
        { command = "/cast Ascendance", conditions = "(dot.flame_shock.ticking or not talent(Molten Assault)) and ti_chain_lightning" },
        { command = "/cast Tempest,Target If=Min:Debuff.Lightning Rod.Remains", conditions = "buff.maelstrom_weapon.stack>=9 and not buff:Ascendance > 0 and (cooldown:Primordial Wave>15 or buff.tempest.max_stack)" },
        { command = "/cast Windstrike,Target If=Min:Debuff.Lightning Rod.Remains", conditions = "talent(Thorims Invocation) and buff.maelstrom_weapon.stack>=10 and ti_chain_lightning and buff:Tempest > 0" },
        { command = "/cast Feral Spirit", conditions = "(cooldown:Doom Winds>30 or cooldown:Doom Winds<7)" },
        { command = "/cast Doom Winds", conditions = "true" },
        { command = "/cast Primordial Storm", conditions = "(buff.maelstrom_weapon.stack>=10) and (buff:Doom Winds > 0 or not talent(Doom Winds) or (cooldown:Doom Winds>buff:Primordial Storm) or (buff:Primordial Storm<2*gcd))" },
        { command = "/cast Crash Lightning", conditions = "talent(Converging Storms) and buff.electrostatic_wager.stack>6 or not buff:Crash Lightning > 0 or (buff.maelstrom_weapon.stack<2 and buff:Ascendance > 0 and buff:Tempest > 0)" },
        { command = "/cast Voltaic Blaze", conditions = "(buff.maelstrom_weapon.stack<6 and buff:Ascendance > 0 and (buff:Ascendance>=gcd*2) and buff:Tempest > 0)" },
        { command = "/cast Sundering", conditions = "(buff.maelstrom_weapon.stack<6 and buff:Ascendance > 0 and (buff:Ascendance>=gcd*2) and buff:Tempest > 0)" },
        { command = "/cast Chain Lightning,Target If=Min:Debuff.Lightning Rod.Remains", conditions = "buff.maelstrom_weapon.stack>=10 and buff:Ascendance > 0 and not buff:Tempest > 0" },
        { command = "/cast Windstrike,Target If=Min:Debuff.Lightning Rod.Remains", conditions = "talent(Thorims Invocation) and buff.maelstrom_weapon.stack>0 and ti_chain_lightning" },
        { command = "/cast Tempest", conditions = "buff.maelstrom_weapon.stack>=5 and ((buff:Tempest > 0 and tww3_procs_to_asc<=1) or (buff.tempest.max_stack and cooldown:Ascendance<=2 and talent(Ascendance)))" },
        { command = "/cast Crash Lightning", conditions = "talent(Converging Storms) and talent(Alpha Wolf)" },
        { command = "/cast Stormstrike", conditions = "buff.converging_storms.stack=6 and buff.stormblast.stack>0 and buff:Legacy Of The Frost Witch > 0 and buff.maelstrom_weapon.stack<=8" },
        { command = "/cast Crash Lightning", conditions = "buff.maelstrom_weapon.stack<=8" },
        { command = "/cast Voltaic Blaze", conditions = "buff.maelstrom_weapon.stack<=8" },
        { command = "/cast Chain Lightning,Target If=Min:Debuff.Lightning Rod.Remains", conditions = "buff.maelstrom_weapon.stack>=7 and not buff:Primordial Storm > 0" },
        { command = "/cast Fire Nova", conditions = "variable.flame_shock_saturated and active_enemies>=4" },
        { command = "/cast Sundering", conditions = "true" },
        { command = "/cast Stormstrike", conditions = "talent(Stormblast) and talent(Stormflurry)" },
        { command = "/cast Voltaic Blaze", conditions = "true" },
        { command = "/cast Lava Lash,Target If=Min:Debuff.Lashing Flames.Remains", conditions = "talent(Lashing Flames) or talent(Molten Assault) and dot.flame_shock.ticking" },
        { command = "/cast Ice Strike", conditions = "talent(Hailstorm) and not buff:Ice Strike > 0" },
        { command = "/cast Frost Shock", conditions = "talent(Hailstorm) and buff:Hailstorm > 0" },
        { command = "/cast Sundering", conditions = "true" },
        { command = "/cast Flame Shock", conditions = "talent(Molten Assault) and not ticking" },
        { command = "/cast Flame Shock,Target If=Min:Dot.Flame Shock.Remains", conditions = "(talent(Fire Nova) or talent(Primordial Wave)) and not variable.flame_shock_saturated" },
        { command = "/cast Fire Nova", conditions = "active_dot.flame_shock>=3" },
        { command = "/cast Stormstrike", conditions = "buff:Crash Lightning > 0 and (talent(Deeply Rooted Elements) or buff.converging_storms.stack=buff.converging_storms.max_stack)" },
        { command = "/cast Crash Lightning", conditions = "talent(Crashing Storms) and buff:Cl Crash Lightning > 0" },
        { command = "/cast Windstrike", conditions = "true" },
        { command = "/cast Stormstrike", conditions = "true" },
        { command = "/cast Ice Strike", conditions = "true" },
        { command = "/cast Lava Lash", conditions = "true" },
        { command = "/cast Crash Lightning", conditions = "true" },
        { command = "/cast Fire Nova", conditions = "active_dot.flame_shock>=2" },
        { command = "/cast Chain Lightning,Target If=Min:Debuff.Lightning Rod.Remains", conditions = "buff.maelstrom_weapon.stack>=5 and not buff:Primordial Storm > 0" },
        { command = "/cast Flame Shock", conditions = "not ticking" },
        { command = "/cast Frost Shock", conditions = "not talent(Hailstorm)" },
    },
}

SkillWeaver.Reference["Monk_Windwalker"] = {
    ["Default_Main"] = {
        -- SimC List: default (27 actions)
        { command = "/cast Roll", conditions = "movement.distance>5" },
        { command = "/cast Chi Torpedo", conditions = "movement.distance>5" },
        { command = "/cast Flying Serpent Kick", conditions = "movement.distance>5" },
        { command = "/cast Spear Hand Strike", conditions = "debuff.casting.react" },
        { command = "/cast Potion", conditions = "talent.invoke_xuen_the_white_tiger and pet.xuen_the_white_tiger.active and buff:Storm Earth And Fire > 0" },
        { command = "/cast Potion", conditions = "not talent.invoke_xuen_the_white_tiger and buff:Storm Earth And Fire > 0" },
        { command = "/cast Potion", conditions = "fight_remains<=30" },
        { command = "/cast Variable,Name=Has External Pi,Value=Cooldown.Invoke Power Infusion 0.Duration>0", conditions = "true" },
        { command = "/cast Variable,Name=Sef Condition,Value=Target.Time To Die>6&(Cooldown.Rising Sun Kick.Remains|Active Enemies>2|!Talent.Ordered Elements)&(Prev.Invoke Xuen The White Tiger|(Talent.Celestial Conduit|!Talent.Last Emperors Capacitor)&Buff.Bloodlust.Up&(Cooldown.Strike Of The Windlord.Remains<5|!Talent.Strike Of The Windlord)&Talent.Sequenced Strikes|Buff.Invokers Delight.Remains>15|(Cooldown.Strike Of The Windlord.Remains<5|!Talent.Strike Of The Windlord)&Cooldown.Storm Earth And Fire.Full Recharge Time<Cooldown.Invoke Xuen The White Tiger.Remains&Cooldown.Fists Of Fury.Remains<5&(!Talent.Last Emperors Capacitor|Talent.Celestial Conduit)|Talent.Last Emperors Capacitor&Buff.The Emperors Capacitor.Stack>17&Cooldown.Invoke Xuen The White Tiger.Remains>Cooldown.Storm Earth And Fire.Full Recharge Time)|Fight Remains<30|Buff.Invokers Delight.Remains>15&(Cooldown.Rising Sun Kick.Remains|Active Enemies>2|!Talent.Ordered Elements)|Fight Style.Patchwerk&Buff.Bloodlust.Up&(Cooldown.Rising Sun Kick.Remains|Active Enemies>2|!Talent.Ordered Elements)&Talent.Celestial Conduit&Time>10", conditions = "true" },
        { command = "/cast Variable,Name=Xuen Dungeonslice Condition,Value=Active Enemies=1&(Time<10|Talent.Xuens Bond&Talent.Celestial Conduit&Target.Time To Die>14)|Active Enemies>1&Cooldown.Storm Earth And Fire.Ready&Target.Time To Die>14&(Active Enemies>2|Debuff.Acclamation.Up|!Talent.Ordered Elements&Time<5)&((Chi>2&!Talent.Ordered Elements|Talent.Ordered Elements|!Talent.Ordered Elements&Energy<50)|Talent.Sequenced Strikes&Talent.Energy Burst&Talent.Revolving Whirl)|Fight Remains<30|Active Enemies>3&Target.Time To Die>5|Fight Style.Dungeonslice&Time>50&Target.Time To Die>1&Talent.Xuens Bond", conditions = "true" },
        { command = "/cast Variable,Name=Xuen Condition,Value=(Fight Style.Dungeonslice&Active Enemies=1&(Time<10|Talent.Xuens Bond&Talent.Celestial Conduit)|!Fight Style.Dungeonslice|Active Enemies>1)&Cooldown.Storm Earth And Fire.Ready&(Target.Time To Die>14&!Fight Style.Dungeonroute|Target.Time To Die>22)&(Active Enemies>2|Debuff.Acclamation.Up|!Talent.Ordered Elements&Time<5)&(Chi>2&Talent.Ordered Elements|Chi>5|Chi>3&Energy<50|Energy<50&Active Enemies=1|Prev.Tiger Palm&!Talent.Ordered Elements&Time<5)|Fight Remains<30|Fight Style.Dungeonroute&Talent.Celestial Conduit&Target.Time To Die>14", conditions = "true" },
        { command = "/cast Variable,Name=Xuen Dungeonroute Condition,Value=Cooldown.Storm Earth And Fire.Ready&(Active Enemies>1&Cooldown.Storm Earth And Fire.Ready&Target.Time To Die>22&(Active Enemies>2|Debuff.Acclamation.Up|!Talent.Ordered Elements&Time<5)&((Chi>2&!Talent.Ordered Elements|Talent.Ordered Elements|!Talent.Ordered Elements&Energy<50)|Talent.Sequenced Strikes&Talent.Energy Burst&Talent.Revolving Whirl)|Fight Remains<30|Active Enemies>3&Target.Time To Die>15|Time>50&(Target.Time To Die>10&Talent.Xuens Bond|Target.Time To Die>20))|Buff.Storm Earth And Fire.Remains>5", conditions = "true" },
        { command = "/cast Variable,Name=Sef Dungeonroute Condition,Value=Time<50&Target.Time To Die>10&(Buff.Bloodlust.Up|Active Enemies>2|Cooldown.Strike Of The Windlord.Remains<2|Talent.Last Emperors Capacitor&Buff.The Emperors Capacitor.Stack>17)|Target.Time To Die>10&(Cooldown.Storm Earth And Fire.Full Recharge Time<Cooldown.Invoke Xuen The White Tiger.Remains|Cooldown.Invoke Xuen The White Tiger.Remains<30&(Cooldown.Storm Earth And Fire.Full Recharge Time<30|Cooldown.Storm Earth And Fire.Full Recharge Time<40&Talent.Flurry Strikes))&(Talent.Sequenced Strikes&Talent.Energy Burst&Talent.Revolving Whirl|Talent.Flurry Strikes|Chi>3|Energy<50)&(Active Enemies>2|!Talent.Ordered Elements|Cooldown.Rising Sun Kick.Remains)&!Talent.Flurry Strikes|Target.Time To Die>10&Talent.Flurry Strikes&(Active Enemies>2|!Talent.Ordered Elements|Cooldown.Rising Sun Kick.Remains)&(Talent.Last Emperors Capacitor&Buff.The Emperors Capacitor.Stack>17&Cooldown.Storm Earth And Fire.Full Recharge Time<Cooldown.Invoke Xuen The White Tiger.Remains&Cooldown.Invoke Xuen The White Tiger.Remains>15|!Talent.Last Emperors Capacitor&Cooldown.Storm Earth And Fire.Full Recharge Time<Cooldown.Invoke Xuen The White Tiger.Remains&Cooldown.Invoke Xuen The White Tiger.Remains>15)", conditions = "true" },
        { command = "/cast Call Action List,Name=Trinkets", conditions = "true" },
        { command = "/cast Call Action List,Name=Aoe Opener", conditions = "time<3 and active_enemies>2" },
        { command = "/cast Call Action List,Name=Normal Opener", conditions = "time<4 and active_enemies<3" },
        { command = "/cast Call Action List,Name=Cooldowns", conditions = "talent.storm_earth_and_fire" },
        { command = "/cast Call Action List,Name=Default Aoe", conditions = "active_enemies>=5" },
        { command = "/cast Call Action List,Name=Default Cleave", conditions = "active_enemies>1 and (time>7 or not talent.celestial_conduit) and active_enemies<5" },
        { command = "/cast Call Action List,Name=Default St", conditions = "active_enemies<2" },
        { command = "/cast Call Action List,Name=Fallback", conditions = "true" },
        { command = "/cast Arcane Torrent", conditions = "chi<chi.max and energy<55" },
        { command = "/cast Bag Of Tricks", conditions = "buff:Storm Earth And Fire == 0" },
        { command = "/cast Lights Judgment", conditions = "buff:Storm Earth And Fire == 0" },
        { command = "/cast Haymaker", conditions = "buff:Storm Earth And Fire == 0" },
        { command = "/cast Rocket Barrage", conditions = "buff:Storm Earth And Fire == 0" },
        { command = "/cast Arcane Pulse", conditions = "buff:Storm Earth And Fire == 0" },
        -- SimC List: cooldowns (9 actions)
        { command = "/cast Storm Earth And Fire,Target If=Max:Target.Time To Die", conditions = "fight_style.dungeonroute and buff:Invokers Delight>15 and (active_enemies>2 or not talent.ordered_elements or cooldown:Rising Sun Kick)" },
        { command = "/cast Tiger Palm", conditions = "(ttd>14 and not fight_style.dungeonroute or ttd>22) and not cooldown:Invoke Xuen The White Tiger and (chi<5 and not talent.ordered_elements or chi<3) and (combo_strike or not talent.hit_combo)" },
        { command = "/cast Invoke Xuen The White Tiger,Target If=Max:Target.Time To Die", conditions = "variable.xuen_condition and not fight_style.dungeonslice and not fight_style.dungeonroute or variable.xuen_dungeonslice_condition and fight_style.Dungeonslice or variable.xuen_dungeonroute_condition and fight_style.dungeonroute" },
        { command = "/cast Storm Earth And Fire,Target If=Max:Target.Time To Die", conditions = "variable.sef_condition and not fight_style.dungeonroute or variable.sef_dungeonroute_condition and fight_style.dungeonroute" },
        { command = "/cast Touch Of Karma", conditions = "true" },
        { command = "/cast Ancestral Call", conditions = "buff:Invoke Xuen The White Tiger>15 or not talent.invoke_xuen_the_white_tiger and (not talent.storm_earth_and_fire and (cooldown.strike_of_the_windlord.ready or not talent.strike_of_the_windlord and cooldown.fists_of_fury.ready) or buff:Storm Earth And Fire>10) or fight_remains<20" },
        { command = "/cast Blood Fury", conditions = "buff:Invoke Xuen The White Tiger>15 or not talent.invoke_xuen_the_white_tiger and (not talent.storm_earth_and_fire and (cooldown.strike_of_the_windlord.ready or not talent.strike_of_the_windlord and cooldown.fists_of_fury.ready) or buff:Storm Earth And Fire>10) or fight_remains<20" },
        { command = "/cast Fireblood", conditions = "buff:Invoke Xuen The White Tiger>15 or not talent.invoke_xuen_the_white_tiger and (not talent.storm_earth_and_fire and (cooldown.strike_of_the_windlord.ready or not talent.strike_of_the_windlord and cooldown.fists_of_fury.ready) or buff:Storm Earth And Fire>10) or fight_remains<20" },
        { command = "/cast Berserking", conditions = "buff:Invoke Xuen The White Tiger>15 or not talent.invoke_xuen_the_white_tiger and (not talent.storm_earth_and_fire and (cooldown.strike_of_the_windlord.ready or not talent.strike_of_the_windlord and cooldown.fists_of_fury.ready) or buff:Storm Earth And Fire>10) or fight_remains<20" },
    },
}

SkillWeaver.Reference["DeathKnight_Unholy"] = {
    ["San"] = {
        -- SimC List: cds_aoe_san (3 actions)
        { command = "/cast Unholy Assault,Target If=Min:Debuff.Festering Wound.Stack", conditions = "variable.adds_remain and buff:Dark Transformation > 0 and buff:Dark Transformation<12" },
        { command = "/cast Apocalypse,Target If=Min:Debuff.Festering Wound.Stack", conditions = "variable.adds_remain and (buff:Death And Decay > 0 or active_enemies<=3 or rune<3)" },
        { command = "/cast Outbreak", conditions = "(dot.virulent_plague.ticks_remain<5 or set_bonus.tww2_4pc and talent.superstrain and dot.frost_fever.ticks_remain<5 and not pet.abomination.active) and (talent.unholy_blight and not cooldown.dark_transformation.ready or not talent.unholy_blight) and (dot.virulent_plague.refreshable or talent.morbidity and not buff:Gift Of The Sanlayn > 0 and talent.superstrain and dot.frost_fever.refreshable and dot.blood_plague.refreshable) and (not dot.virulent_plague.ticking and variable.epidemic_targets<active_enemies or (not talent.unholy_blight or talent.unholy_blight and cooldown:Dark Transformation>5) and (not talent.raise_abomination or talent.raise_abomination and cooldown:Raise Abomination>5)) or buff:Visceral Strength Unholy > 0" },
        -- SimC List: cds_cleave_san (3 actions)
        { command = "/cast Apocalypse,Target If=Max:Debuff.Festering Wound.Stack", conditions = "true" },
        { command = "/cast Unholy Assault,Target If=Min:Debuff.Festering Wound.Stack", conditions = "buff:Dark Transformation > 0 and buff:Dark Transformation<12 or fight_remains<20 or raid_event.adds.exists and raid_event.adds.remains<20" },
        { command = "/cast Outbreak,Target If=Target.Time To Die>Dot.Virulent Plague.Remains&Dot.Virulent Plague.Ticks Remain<5", conditions = "(dot.virulent_plague.refreshable or talent.morbidity and buff:Infliction Of Sorrow > 0 and talent.superstrain and dot.frost_fever.refreshable and dot.blood_plague.refreshable) and (not talent.unholy_blight or talent.unholy_blight and cooldown:Dark Transformation>6) and (not talent.raise_abomination or talent.raise_abomination and cooldown:Raise Abomination>6) or buff:Visceral Strength Unholy > 0" },
        -- SimC List: cds_san (4 actions)
        { command = "/cast Apocalypse", conditions = "variable.st_planning or fight_remains<20" },
        { command = "/cast Unholy Assault", conditions = "variable.st_planning and (buff:Dark Transformation > 0 and buff:Dark Transformation<12) or fight_remains<20" },
        { command = "/cast Outbreak,Target If=Target.Time To Die>Dot.Virulent Plague.Remains&Dot.Virulent Plague.Ticks Remain<5", conditions = "(dot.virulent_plague.refreshable or talent.morbidity and buff:Infliction Of Sorrow > 0 and talent.superstrain and dot.frost_fever.refreshable and dot.blood_plague.refreshable) and (not talent.unholy_blight or talent.unholy_blight and cooldown:Dark Transformation>6) and (not talent.raise_abomination or talent.raise_abomination and cooldown:Raise Abomination>6) or buff:Visceral Strength Unholy > 0" },
        { command = "/cast Outbreak,Target If=Target.Time To Die>Dot.Frost Fever.Remains&Dot.Frost Fever.Ticks Remain<5", conditions = "talent.superstrain and set_bonus.tww2_4pc and dot.frost_fever.refreshable and (not talent.unholy_blight or talent.unholy_blight and cooldown:Dark Transformation>6) and (not talent.raise_abomination or talent.raise_abomination and cooldown:Raise Abomination>6)" },
        -- SimC List: san_fishing (7 actions)
        { command = "/cast Wound Spender", conditions = "buff:Infliction Of Sorrow > 0" },
        { command = "/cast Any Dnd", conditions = "not buff:Death And Decay > 0 and not buff.vampiric_strike.react" },
        { command = "/cast Death Coil", conditions = "buff.sudden_doom.react and talent.doomed_bidding or set_bonus.tww2_4pc and buff.essence_of_the_blood_queen.at_max_stacks and talent.frenzied_bloodthirst and not buff.vampiric_strike.react" },
        { command = "/cast Soul Reaper", conditions = "health.pct<=35 and fight_remains>5" },
        { command = "/cast Death Coil", conditions = "not buff.vampiric_strike.react" },
        { command = "/cast Wound Spender", conditions = "(debuff.festering_wound.stack>=3-pet.abomination.active and cooldown:Apocalypse>variable.apoc_timing) or buff.vampiric_strike.react" },
        { command = "/cast Festering Strike", conditions = "debuff.festering_wound.stack<3-pet.abomination.active" },
        -- SimC List: san_st (10 actions)
        { command = "/cast Festering Strike", conditions = "buff.festering_scythe.react and (not raid_event.adds.exists or not raid_event.adds.in or raid_event.adds.in>11 or raid_event.pull.has_boss and raid_event.adds.in>11)" },
        { command = "/cast Death Coil", conditions = "buff.sudden_doom.react and buff:Gift Of The Sanlayn and (talent.doomed_bidding or talent.rotten_touch) or rune<3 and not buff:Runic Corruption > 0 or set_bonus.tww2_4pc and runic_power>80 or buff:Gift Of The Sanlayn > 0 and buff.essence_of_the_blood_queen.at_max_stacks and talent.frenzied_bloodthirst and set_bonus.tww2_4pc and buff.winning_streak_unholy.at_max_stacks and rune<=3 and buff:Essence Of The Blood Queen>3" },
        { command = "/cast Wound Spender", conditions = "buff.vampiric_strike.react and debuff.festering_wound.stack>=1 or buff:Gift Of The Sanlayn > 0 or talent.gift_of_the_sanlayn and buff:Dark Transformation > 0 and buff:Dark Transformation<gcd" },
        { command = "/cast Soul Reaper", conditions = "health.pct<=35 and not buff:Gift Of The Sanlayn > 0 and fight_remains>5" },
        { command = "/cast Festering Strike", conditions = "(debuff.festering_wound.stack=0 and cooldown:Apocalypse<variable.apoc_timing) or not buff:Dark Transformation > 0 and cooldown:Dark Transformation<10 and debuff.festering_wound.stack<=3 and (rune>4 or runic_power<80) or (talent.gift_of_the_sanlayn and not buff:Gift Of The Sanlayn > 0 or not talent.gift_of_the_sanlayn) and debuff.festering_wound.stack<=1" },
        { command = "/cast Wound Spender", conditions = "(not talent.apocalypse or cooldown:Apocalypse>variable.apoc_timing) and (cooldown:Dark Transformation>5 and debuff.festering_wound.stack>=3-pet.abomination.active or buff.vampiric_strike.react)" },
        { command = "/cast Death Coil", conditions = "not variable.pooling_runic_power and debuff:Death Rot<gcd or (buff.sudden_doom.react and debuff.festering_wound.stack>=1 or rune<2)" },
        { command = "/cast Wound Spender", conditions = "debuff.festering_wound.stack>4" },
        { command = "/cast Death Coil", conditions = "not variable.pooling_runic_power" },
        { command = "/cast Wound Spender", conditions = "(not talent.apocalypse or cooldown:Apocalypse>variable.apoc_timing) and rune>=4" },
        -- SimC List: san_trinkets (6 actions)
        { command = "/cast Use Item,Name=Treacherous Transmitter", conditions = "(variable.adds_remain or variable.st_planning) and cooldown:Dark Transformation<10" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "(buff.latent_energy.stack>=8 or not trinket.1.is.unyielding_netherprism) and variable.trinket_1_buffs and (buff:Dark Transformation > 0 and buff:Dark Transformation<variable.trinket_1_duration*0.73 and (variable.trinket_priority=1 or trinket.2.cooldown.remains or not trinket.2.has_cooldown)) or variable.trinket_1_duration>=fight_remains" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "(buff.latent_energy.stack>=8 or not trinket.2.is.unyielding_netherprism) and variable.trinket_2_buffs and (buff:Dark Transformation > 0 and buff:Dark Transformation<variable.trinket_2_duration*0.73 and (variable.trinket_priority=2 or trinket.1.cooldown.remains or not trinket.1.has_cooldown)) or variable.trinket_2_duration>=fight_remains" },
        { command = "/cast Use Item,Slot=Trinket1", conditions = "not variable.trinket_1_buffs and (trinket.1.cast_time>0 and not buff:Gift Of The Sanlayn > 0 or not trinket.1.cast_time>0) and (variable.damage_trinket_priority=1 or trinket.2.cooldown.remains or not trinket.2.has_cooldown or not talent.summon_gargoyle and not talent.army_of_the_dead and not talent.raise_abomination or not talent.summon_gargoyle and talent.army_of_the_dead and (not talent.raise_abomination and cooldown:Army Of The Dead>20 or talent.raise_abomination and cooldown:Raise Abomination>20) or not talent.summon_gargoyle and not talent.army_of_the_dead and not talent.raise_abomination and cooldown:Dark Transformation>20 or talent.summon_gargoyle and cooldown:Summon Gargoyle>20 and not pet.gargoyle.active) or fight_remains<15" },
        { command = "/cast Use Item,Slot=Trinket2", conditions = "not variable.trinket_2_buffs and (trinket.2.cast_time>0 and not buff:Gift Of The Sanlayn > 0 or not trinket.2.cast_time>0) and (variable.damage_trinket_priority=2 or trinket.1.cooldown.remains or not trinket.1.has_cooldown or not talent.summon_gargoyle and not talent.army_of_the_dead and not talent.raise_abomination or not talent.summon_gargoyle and talent.army_of_the_dead and (not talent.raise_abomination and cooldown:Army Of The Dead>20 or talent.raise_abomination and cooldown:Raise Abomination>20) or not talent.summon_gargoyle and not talent.army_of_the_dead and not talent.raise_abomination and cooldown:Dark Transformation>20 or talent.summon_gargoyle and cooldown:Summon Gargoyle>20 and not pet.gargoyle.active) or fight_remains<15" },
        { command = "/cast Use Item,Slot=Main Hand", conditions = "(not variable.trinket_1_buffs and not variable.trinket_2_buffs or trinket.1.cooldown.remains>20 and not variable.trinket_2_buffs or trinket.2.cooldown.remains>20 and not variable.trinket_1_buffs or trinket.1.cooldown.remains>20 and trinket.2.cooldown.remains>20) and (buff:Dark Transformation > 0 and buff:Dark Transformation>10) and (not talent.raise_abomination and not talent.army_of_the_dead or not talent.raise_abomination and talent.army_of_the_dead and pet.army_ghoul.active or talent.raise_abomination and pet.abomination.active or (variable.trinket_1_buffs or variable.trinket_2_buffs or fight_remains<15))" },
    },
    ["Default_Main"] = {
        -- SimC List: default (17 actions)
        { command = "/cast Call Action List,Name=Variables", conditions = "true" },
        { command = "/cast Call Action List,Name=San Trinkets", conditions = "talent.vampiric_strike" },
        { command = "/cast Call Action List,Name=Trinkets", conditions = "not talent.vampiric_strike" },
        { command = "/cast Call Action List,Name=Racials", conditions = "true" },
        { command = "/cast Call Action List,Name=Cds Shared", conditions = "true" },
        { command = "/cast Call Action List,Name=Cds Aoe San", conditions = "talent.vampiric_strike and active_enemies>=3" },
        { command = "/cast Call Action List,Name=Cds Aoe", conditions = "not talent.vampiric_strike and active_enemies>=2" },
        { command = "/cast Call Action List,Name=Cds Cleave San", conditions = "talent.vampiric_strike and active_enemies=2" },
        { command = "/cast Call Action List,Name=Cds San", conditions = "talent.vampiric_strike and active_enemies=1" },
        { command = "/cast Call Action List,Name=Cds", conditions = "not talent.vampiric_strike and active_enemies=1" },
        { command = "/cast Call Action List,Name=Cleave", conditions = "active_enemies=2" },
        { command = "/cast Call Action List,Name=Aoe Setup", conditions = "active_enemies>=3 and cooldown:Any Dnd<7 and not buff:Legion Of Souls > 0 and (buff:Death And Decay<3 or death_knight.fwounded_targets<(active_enemies*0.5))" },
        { command = "/cast Call Action List,Name=Aoe Burst", conditions = "active_enemies>=3 and (death_and_decay.ticking or buff:Death And Decay > 0 and (death_knight.fwounded_targets>=(active_enemies*0.5) or talent.vampiric_strike and active_enemies<16 or talent.desecrate and death_knight.fwounded_targets=active_enemies and talent.bursting_sores))" },
        { command = "/cast Call Action List,Name=Aoe", conditions = "active_enemies>=3 and not buff:Death And Decay > 0" },
        { command = "/cast Run Action List,Name=San Fishing", conditions = "active_enemies=1 and talent.gift_of_the_sanlayn and not cooldown.dark_transformation.ready and not buff:Gift Of The Sanlayn > 0 and buff:Essence Of The Blood Queen<cooldown:Dark Transformation+3" },
        { command = "/cast Call Action List,Name=San St", conditions = "active_enemies=1 and talent.vampiric_strike" },
        { command = "/cast Call Action List,Name=St", conditions = "active_enemies=1 and not talent.vampiric_strike" },
        -- SimC List: st (6 actions)
        { command = "/cast Wound Spender", conditions = "debuff:Chains Of Ice Trollbane Slow > 0" },
        { command = "/cast Death Coil", conditions = "not variable.pooling_runic_power and variable.spend_rp or fight_remains<10" },
        { command = "/cast Festering Strike", conditions = "debuff.festering_wound.stack<4 and (not variable.pop_wounds or buff.festering_scythe.react)" },
        { command = "/cast Wound Spender", conditions = "variable.pop_wounds" },
        { command = "/cast Death Coil", conditions = "not variable.pooling_runic_power" },
        { command = "/cast Wound Spender", conditions = "not variable.pop_wounds and debuff.festering_wound.stack>=4" },
        -- SimC List: aoe (9 actions)
        { command = "/cast Death Coil,Target If=Min:Debuff.Rotten Touch.Remains*(Buff.Sudden Doom.React&Talent.Rotten Touch)", conditions = "rune<4 and active_enemies<variable.epidemic_targets and buff:Gift Of The Sanlayn > 0 and gcd<=1.0 and (not raid_event.adds.exists and fight_remains>buff:Dark Transformation*2 or raid_event.adds.exists and raid_event.adds.remains>buff:Dark Transformation*2)" },
        { command = "/cast Epidemic", conditions = "rune<4 and active_enemies>variable.epidemic_targets and buff:Gift Of The Sanlayn > 0 and gcd<=1.0 and (not raid_event.adds.exists and fight_remains>buff:Dark Transformation*2 or raid_event.adds.exists and raid_event.adds.remains>buff:Dark Transformation*2)" },
        { command = "/cast Wound Spender,Target If=Max:Debuff.Festering Wound.Stack", conditions = "debuff.festering_wound.stack>=1 and buff:Death And Decay > 0 and talent.bursting_sores and cooldown:Apocalypse>variable.apoc_timing" },
        { command = "/cast Death Coil,Target If=Min:Debuff.Rotten Touch.Remains*(Buff.Sudden Doom.React&Talent.Rotten Touch)", conditions = "not variable.pooling_runic_power and active_enemies<variable.epidemic_targets" },
        { command = "/cast Epidemic", conditions = "not variable.pooling_runic_power" },
        { command = "/cast Wound Spender,Target If=Debuff.Chains Of Ice Trollbane Slow.Up", conditions = "true" },
        { command = "/cast Festering Strike,Target If=Max:Debuff.Festering Wound.Stack", conditions = "cooldown:Apocalypse<variable.apoc_timing or buff.festering_scythe.react" },
        { command = "/cast Festering Strike,Target If=Min:Debuff.Festering Wound.Stack", conditions = "debuff.festering_wound.stack<2" },
        { command = "/cast Wound Spender,Target If=Max:Debuff.Festering Wound.Stack", conditions = "debuff.festering_wound.stack>=1 and cooldown:Apocalypse>gcd or buff.vampiric_strike.react and dot.virulent_plague.ticking" },
    },
}

SkillWeaver.Reference["Rogue_Subtlety"] = {
    ["Default_Main"] = {
        -- SimC List: default (14 actions)
        { command = "/cast Variable,Name=Stealth,Value=Buff.Shadow Dance.Up|Buff.Stealth.Up|Buff.Vanish.Up", conditions = "true" },
        { command = "/cast Variable,Name=Targets,Value=Spell Targets.Shuriken Storm", conditions = "true" },
        { command = "/cast Variable,Name=Skip Rupture,Value=Buff.Shadow Dance.Up|Buff.Darkest Night.Up|Variable.Targets>=4&(!Talent.Replicating Shadows&Talent.Unseen Blade|Raid Event.Adds.Up)", conditions = "true" },
        { command = "/cast Variable,Name=Maintenance,Value=(Dot.Rupture.Ticking|Variable.Skip Rupture)&(Buff.Slice And Dice.Up|Variable.Targets<=2)", conditions = "true" },
        { command = "/cast Variable,Name=Secret,Value=Buff.Shadow Dance.Up&!Buff.Darkest Night.Up|(Cooldown.Flagellation.Remains<60&Cooldown.Flagellation.Remains>30&Talent.Death Perception&Talent.Unseen Blade)", conditions = "true" },
        { command = "/cast Variable,Name=Racial Sync,Value=(Buff.Shadow Blades.Up&Buff.Shadow Dance.Up)|!Talent.Shadow Blades&Buff.Symbols Of Death.Up|Fight Remains<20", conditions = "true" },
        { command = "/cast Variable,Name=Shd Cp,Value=Combo Points<=1|Buff.Darkest Night.Up&Combo Points>=7|Effective Combo Points>=6&Talent.Unseen Blade", conditions = "true" },
        { command = "/cast Call Action List,Name=Cds", conditions = "true" },
        { command = "/cast Call Action List,Name=Race", conditions = "true" },
        { command = "/cast Call Action List,Name=Item", conditions = "true" },
        { command = "/cast Call Action List,Name=Stealth Cds", conditions = "not variable.stealth" },
        { command = "/cast Call Action List,Name=Finish", conditions = "not buff:Darkest Night > 0 and effective_combo_points>=6 or buff:Darkest Night > 0 and combo_points==cp_max_spend or action.coup_de_grace.ready and cooldown:Secret Technique>0" },
        { command = "/cast Call Action List,Name=Build", conditions = "true" },
        { command = "/cast Call Action List,Name=Fill", conditions = "not variable.stealth" },
    },
}